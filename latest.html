<!DOCTYPE html>
<html>
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-37528940-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-37528940-3');
</script>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">
<meta name="google-site-verification" content="4cR7WuQWEtkbu8ThfxGkT1vACiVi5Q_8ykfkRudOnTU" />

<link rel="shortcut icon" href="/images/favicon.png">

<link rel="stylesheet" type="text/css" href="/css/common.css">
<script type="text/javascript" src="/js/jquery-1.9.0.min.js"></script>
<script type="text/javascript" src="/js/google-code-prettify/prettify.js"></script>
<link  type="text/css" rel="stylesheet" href="/js/google-code-prettify/prettify.css"/>
<script>
  $(function(){
    // google code prettifyの有効化
    $("pre").addClass("prettyprint");
    function init(event){
      prettyPrint();
    }
    if(window.addEventListener)window.addEventListener("load",init,false);
    else if(window.attachEvent)window.attachEvent("onload",init);
    
    $(".to-top").click(function() {
      // ページの一番上までスクロールさせます。
      $('body, html').animate({scrollTop: 0}, 300, 'linear');;
    });
  });
</script>

  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>
  <a href="/"><img src="/images/logo.png"><span style="font-size:105%">Perl</span>入門ゼミ</a>
</h1>
<div class="header-description">
  テキスト処理、Linuxサーバー管理、Web開発ならPerl
</div>
<div class="header-otoiawase">
  <div style="display:table-cell;padding-right:3px;">
    <a rel="nofollow" style="" href="https://twitter.com/perlzemi" title="Twitter" style="padding-right:3px;"><img style="width:37px" src="/images/Twitter_Social_Icon_Square_Color.png"></a>
  </div>
  <div style="display:table-cell;vertical-align:top;">
    <a rel="nofollow" style="display:block;width:100%;background:#F048A4;color:white;text-decoration:none;padding:3px;" href="https://perlzemi.slack.com">フォーラムへ<br>ログイン</a>
  </div>
</div>

      </div>
      <div class="main">
        <div class="content">
          <div class="entry">
  <div class="top">
    <!-- entry-top -->

  </div>
  <div class="middle">
    <div style="font-weight:bold;font-size:18px;letter-spacing:2px;margin:35px 0 0px 0;padding-left:5px;padding-top:5px;border-top:2px solid #ddd">2020/01/14</div>
<ol class="bread" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemprop="item" href="/">
        <span itemprop="name">Perl</span></a>
    <meta itemprop="position" content="1" />
  </li>
  &#8250;
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
      <span itemprop="name"><a href="/blog/20100827127859.html">正規表現</a></span>
    <meta itemprop="position" content="2" />
  </li>
  &#8250;
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
      <span itemprop="name">here</span>
    <meta itemprop="position" content="3" />
  </li>
</ol>
<h2><a href="/blog/20200114103559.html">正規表現の文字クラス</a></h2>
<p>
  複数の文字の集合を表現するには文字クラスを使用します。
</p>
<pre>
[文字の集合]
</pre>
<p>
  たとえば「a」か「b」か「c」という文字を表現したい場合は[abc]と書きます。
</p>
<pre>
a
b    -&gt;    [abc]
c
</pre>
<p>
  アルファベットの範囲や数値の範囲を指定するのにハイフン「-」記号を使用することができます。
</p>
<pre>
a
b
c    -&gt;    [a-e]
d
e
</pre>
<pre>
0
1
2    -&gt;    [0-4]
3
4
</pre>
<p>
  アルファベットと数値のいずれかを表現したい場合は[a-zA-Z0-9]と書きます。
</p>
<pre>
アルファベットと数字    -&gt;    [a-zA-Z0-9]
</pre>
<h3>文字クラスの否定</h3>
<p>
  文字クラスを使って特定の文字以外を表現することもできます。特定の文字以外を表現するには「^」を使用します。文字クラス[]の先頭で「^」が使用されると「それ以外」という意味になり、「文字の先頭」という意味にはならないので注意してください。
</p>
<p>
  たとえば「a」「b」「c」以外の文字を表現するには次のようにします。
</p>
<pre>
「a」「b」「c」以外の文字    -&gt;    [^abc]
</pre>
<h3>Perlで定義済みの文字クラス</h3>
<p>
  Perlで定義済みの文字クラスというものが存在します。「\d」というのは、定義済みの文字クラスです。
</p>
<p>
  <a href="https://perldoc.jp/docs/perl/5.16.1/perlreref.pod#CHARACTER32CLASSES">文字クラス - 正規表現のリファレンス</a>から、定義済みの文字クラスを引用します。
</p>
<pre>
   \d      数値
   \D      非数値
   \w      単語文字
   \W      非単語文字
   \s      空白文字
   \S      非空白文字
   \h      水平空白文字
   \H      非水平空白文字
   \N      非改行 ('{NAME}' に引き続いていない場合; 実験的; 文字クラスでは
           不正; [^\n] と等価; /s なしの場合の '.' と同様)
   \v      垂直空白文字
   \V      非垂直空白文字
   \R      一般的な改行                (?&gt;\v|\x0D\x0A)
   \C      1 バイトにマッチする (Unicode では、'.' は文字にマッチする)
   \pP     P の名前の (Unicode) プロパティ
   \p{...} 1 文字より長い名前の Unicode プロパティにマッチする
   \PP     非 P にマッチする
   \P{...} 1 文字より長い名前の Unicode プロパティがないものにマッチする
   \X      Unicode の拡張書記素クラスタにマッチする
</pre>
<p>
  文字クラスは、文字クラスの中でも使用できます。
</p>
<pre>
[a-c\d\s]
</pre>
<p>
  注意してほしいのは、これらは、すべて、Unicodeの影響を受けるということです。PerlはUnicodeをサポートしており、日本語を扱うよい慣習は、プログラムの中では、すべて<a href="https://tutorial.perlzemi.com/blog/20091118124667.html">内部文字列(デコードされた文字列)</a>として扱うことです。
</p>
<p>
  この場合、「\d」は半角の0～9だけではなく、全角の０～９にもマッチします。\sは、半角の空白文字だけではなく、全角の空白文字にもマッチします。
</p>
<p>
  ASCII範囲に限定したい場合は、以下の解説を読んでください。
</p>
<h4>文字クラスをASCII範囲のみに限定する</h4>
<p>
  文字クラスをASCII範囲のみに限定する「a」オプションがPerl 5.14から導入されています。
</p>
<pre>
# ASCII範囲の数字のみにマッチさせる。
$str =~ /\d+/a;
</pre>
<h4>ASCII範囲のみを表現する文字クラス</h4>
<p>
  Perlには、ASCIIの範囲を表現する文字クラスも存在します。この方法も、ASCII範囲のみに限定したい場合の、もう一つの解決方法です。
</p>
<p>
  たとえばASCIIの範囲で、アルファベットと数字にマッチする文字クラスは以下のように表現できます。
</p>
<pre>
# ASCIIの範囲で、アルファベットと数字にマッチする文字クラス
\p{PosixAlnum}
</pre>
<p>
  <a href="https://perldoc.jp/docs/perl/5.16.1/perlreref.pod#CHARACTER32CLASSES">文字クラス - 正規表現のリファレンス</a>から、定義済みの文字クラスを引用します。
</p>
<p>
  ASCII-rangeと書かれている列の文字クラスに、注目してみましょう。
</p>
<pre>
            ASCII-         Full-
   POSIX    range          range    backslash
 [[:...:]]  \p{...}        \p{...}   sequence    Description
 -----------------------------------------------------------------------
 alnum   PosixAlnum       XPosixAlnum            Alpha と Digit
 alpha   PosixAlpha       XPosixAlpha            英字
 ascii   ASCII                                   任意の ASCII 文字
 blank   PosixBlank       XPosixBlank   \h       水平空白;
                                                   全種類は \p{HorizSpace}
                                                   とも (GNU 拡張)
 cntrl   PosixCntrl       XPosixCntrl            制御文字
 digit   PosixDigit       XPosixDigit   \d       数字
 graph   PosixGraph       XPosixGraph            Alnum と Punct
 lower   PosixLower       XPosixLower            小文字
 print   PosixPrint       XPosixPrint            Graph と Print、しかし
                                                   Cntrl は含まない
 punct   PosixPunct       XPosixPunct            ASCII の範囲の句読点と
                                                   シンボル; 単にその外側の
                                                   punct
 space   PosixSpace       XPosixSpace            [\s\cK]
         PerlSpace        XPerlSpace    \s       Perl の空白の定義
 upper   PosixUpper       XPosixUpper            大文字
 word    PosixWord        XPosixWord    \w       Alnum + Unicode マーク +
                                                   '_' のような接続文字
                                                   (Perl 拡張)
 xdigit  ASCII_Hex_Digit  XPosixDigit            16 進数;
                                                    ASCII の範囲では
                                                    [0-9A-Fa-f]
</pre>
<h3>文字クラスのサンプル</h3>
<p>
  文字クラスのサンプルです。WebサービスのユーザーIDの正規表現、Webサービスのパスワードの正規表現のサンプルも書いてみました。
</p>
<pre>
use strict;
use warnings;
use utf8;

# 文字クラスを使う
my $str = 'Hello';
if ($str =~ /[abcde]/) {
  print "Match\n";
}

# WebサービスのユーザーID(a-zA-Z0-9_)にマッチさせる
my $user_id = 'kimoto_yuki089';
my $user_id_invalid = 'abc&amp;cde';
if ($user_id =~ /^\p{PosixWord}+$/) {
  print "user_is valid\n";
}
unless ($user_id_invalid =~ /^\p{PosixWord}+$/) {
  print "user_id_invalid is invalid\n";
}

# Webサービスのパスワード(ASCII範囲の空白以外の見える文字)にマッチさせる
my $password = 'Ufy|&amp;123_';
my $passowrd_invalid1 = 'abc def';
my $passowrd_invalid2 = 'abcあ';
if ($password =~ /^\p{PosixGraph}+$/) {
  print "password is valid\n";
}
unless ($passowrd_invalid1 =~ /^\p{PosixGraph}+$/) {
  print "passowrd_invalid1 is inalid\n";
}
unless ($passowrd_invalid2 =~ /^\p{PosixGraph}+$/) {
  print "passowrd_invalid2 is inalid\n";
}
</pre>

<div style="font-weight:bold;font-size:18px;letter-spacing:2px;margin:35px 0 0px 0;padding-left:5px;padding-top:5px;border-top:2px solid #ddd">2020/01/11</div>
<h2><a href="/blog/20200111075429.html">Perlゼミの「爆速」プログラミングちゃんねる</a></h2>
<p>
  Perlゼミの「爆速」プログラミングちゃんねるをYoutubeで始めました。
</p>
<p>
  <a href="https://perlzemichannel.seesaa.net/">Perlゼミの「爆速」プログラミングちゃんねる</a>
</p>

<div style="font-weight:bold;font-size:18px;letter-spacing:2px;margin:35px 0 0px 0;padding-left:5px;padding-top:5px;border-top:2px solid #ddd">2020/01/03</div>
<ol class="bread" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemprop="item" href="/">
        <span itemprop="name">Perl</span></a>
    <meta itemprop="position" content="1" />
  </li>
  &#8250;
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemprop="item" href="/blog/20191228171433.html">
      <span itemprop="name">帳票作成</span></a>
    <meta itemprop="position" content="2" />
  </li>
  &#8250;
  <li>
    here
  </li>
</ol>
<h2><a href="/blog/20200103081131.html">請求書の作成 - PDF::API2で帳票作成</a></h2>
<p>
  PDF::API2で請求書を作成してみました。見積書、申込書、レシート、サービス利用明細など、本格的な帳票の作成の基本的なひな型として利用できます。
</p>
<ul>
  <li>A4用紙サイズ</li>
  <li>日本語対応</li>
  <li>太字対応</li>
  <li>背景色対応</li>
  <li>フォントサイズ対応</li>
  <li>下線対応</li>
  <li>表の表示</li>
  <li>表の偶奇カラーリング</li>
  <li>単価、数量、価格</li>
  <li>価格合計</li>
  <li>印鑑押印用の四角</li>
  <li>会社ロゴの挿入</li>
  <li>金額桁区切り</li>
  <li>25項目</li>
</ul>
<p>
  作成した請求書のPDFのサンプルは、こちらからダウンロードできます。
</p>
<p>
  <a href="/examples/pdf/invoice.pdf">請求書のPDFのサンプル</a>
</p>
<h3>PDF::API2で書いた請求書のソースコード</h3>
<p>
  PDF::API2で書いた請求書のソースコードです。
</p>
<p>
  <b>注意点</b>
</p>
<p>
  会社ロゴは、同一ディレクトリに「logo.png」という名前で、配置してください。
</p>
<p>
  日本語用フォントは、<a href="/blog/20191230091936.html">テキストを描画する</a>で紹介した、あおぞら明朝フォントを使っています。通常フォント「AozoraMinchoRegular.ttf」と太字フォント「AozoraMincho-bold.ttf」を同一ディレクトリに配置してください。
</p>
<p>
  レイアウトのアルゴリズムは、表の構造になっています。1つの縦幅を指定して、行を進めています。列は、100分割されていて、その割合を示した位置に表示しています。
</p>
<p>
  <b>PDF::API2で書いた請求書のソースコード</b>
</p>
<pre>
use strict;
use warnings;
use utf8;
use FindBin;
use PDF::API2;

# 商品データ(本)
my $books = [
  {
    name =&gt; '本1',
    unit_price =&gt; 1000,
    count =&gt; 3,
  },
  {
    name =&gt; '本2',
    unit_price =&gt; 2000,
    count =&gt; 6,
  },
  {
    name =&gt; '本3',
    unit_price =&gt; 1500,
    count =&gt; 5,
  }
];

# 金額小計
my $price_total_no_tax = 0;
for my $book (@$books) {
  $price_total_no_tax += $book-&gt;{unit_price} * $book-&gt;{count};
}
my $price_total_no_tax_disp = price_disp($price_total_no_tax);

# 消費税
my $tax_rate = 0.1;
my $tax = int($price_total_no_tax * $tax_rate);
my $tax_disp = price_disp($tax);

# 税込金額
my $price_total = $price_total_no_tax + $tax;
my $price_total_disp = price_disp($price_total);

# PDF
my $pdf = PDF::API2-&gt;new;

# 用紙サイズ A4設定
$pdf-&gt;mediabox('A4');

# 用紙サイズの取得
my @page_size_infos = $pdf-&gt;mediabox;
my $page_width = $page_size_infos[2];
my $page_height = $page_size_infos[3];

# ページ余白
my $page_top_margin = 48;
my $page_bottom_margin = 48;
my $page_left_margin = 49;
my $page_right_margin = 49;

# 日本語に対応したTrueTypeフォントの読み込み - 通常フォントと太字フォント
my $true_type_font_file = "$FindBin::Bin/AozoraMinchoRegular.ttf";
my $font = $pdf-&gt;ttfont($true_type_font_file);
my $true_type_font_bold_file = "$FindBin::Bin/AozoraMincho-bold.ttf";
my $font_bold = $pdf-&gt;ttfont($true_type_font_bold_file);

# フォントサイズ - デフォルト
my $font_size_default = 10;

# 描画開始x座標
my $render_start_x = $page_left_margin;

# 描画開始y座標
my $render_start_y = $page_height - 1 - $page_top_margin;

# 描画終了x座標
my $render_end_x = $page_width - 1 - $page_right_margin;

# 描画終了y座標
my $render_end_y = $page_bottom_margin;

# レイアウトは、テーブル構造になっていて
# 縦幅と横幅の最小単位を設定、横幅は、100分割したものが最小単位
my $unit_height = 14;
my $unit_width = ($render_end_x - $render_start_x) / 100;

# テキスト描画のパディング
my $text_bottom_padding = 3;
my $text_left_padding = 3;

# 受取企業欄の幅
my $receive_company_end_tds_count = 55;

# 請求企業欄の開始位置
my $send_company_start_tds_count = 66.5;

# 色の一覧
my $color_black = '#000';

# 線の幅
my $line_width_basic = 0.3;
my $line_width_bold = 2;

# ページ
my $page = $pdf-&gt;page;

# グラフィック描画
my $gfx = $page-&gt;gfx;

# テキスト描画
my $text = $page-&gt;text;

# 現在の行
my $cur_row = 0;

# 一番上太線
$gfx-&gt;move($render_start_x, $render_start_y);
$gfx-&gt;hline($render_end_x);
$gfx-&gt;linewidth(10);
$gfx-&gt;stroke;
$cur_row += 1.5;

# 申し込み日付
$text-&gt;translate($render_end_x, $render_start_y - $unit_height * $cur_row + $text_bottom_padding);
$text-&gt;font($font, $font_size_default);
$text-&gt;strokecolor($color_black);
$text-&gt;fillcolor($color_black);
$text-&gt;text_right('2019年10月14日');
$gfx-&gt;move($render_start_x + $send_company_start_tds_count * $unit_width);
$gfx-&gt;hline($render_end_x);
$gfx-&gt;linewidth($line_width_basic);
$gfx-&gt;stroke;
$cur_row += 2;

# ロゴの開始位置を保存
my $cur_logo_row = $cur_row - 1.5;

# 請求書タイトル
$text-&gt;translate($render_start_x, $render_start_y - $unit_height * $cur_row + $text_bottom_padding);
$text-&gt;font($font_bold, 20);
$text-&gt;text('請求書');
$cur_row += 3;

# 右列の開始位置を保存
my $cur_right_row = $cur_row + 1;

# 納品先企業名
my $receive_company_name = 'XXXXX株式会社';
$text-&gt;translate($render_start_x, $render_start_y - $unit_height * $cur_row + $text_bottom_padding);
$text-&gt;font($font, $font_size_default);
$text-&gt;text($receive_company_name);
$text-&gt;translate(
  $render_start_x + $receive_company_end_tds_count * $unit_width,
  $render_start_y - $unit_height * $cur_row + $text_bottom_padding
);
$text-&gt;text_right('御中');
$gfx-&gt;move($render_start_x, $render_start_y - $unit_height * $cur_row);
$gfx-&gt;hline($render_start_x + $receive_company_end_tds_count * $unit_width);
$gfx-&gt;linewidth($line_width_basic);
$gfx-&gt;stroke;
$cur_row += 4;

# 件名
my $subject_label = '件　名:';
$text-&gt;translate($render_start_x, $render_start_y - $unit_height * $cur_row + $text_bottom_padding);
$text-&gt;font($font, $font_size_default);
$text-&gt;text($subject_label);
my $subject = '2019年3月3日の商品売買契約';
$text-&gt;translate(
  $render_start_x + 10 * $unit_width,
  $render_start_y - $unit_height * $cur_row + $text_bottom_padding
);
$text-&gt;font($font, $font_size_default);
$text-&gt;text($subject);
$gfx-&gt;move($render_start_x, $render_start_y - $unit_height * $cur_row);
$gfx-&gt;hline($render_start_x + $receive_company_end_tds_count * $unit_width);
$gfx-&gt;linewidth($line_width_basic);
$gfx-&gt;stroke;
$cur_row += 1;

# 納品日
my $delivery_date_label = '納品日:';
$text-&gt;translate($render_start_x, $render_start_y - $unit_height * $cur_row + $text_bottom_padding);
$text-&gt;font($font, $font_size_default);
$text-&gt;text($delivery_date_label);
my $delivery_date = '2019年3月30日';
$text-&gt;translate(
  $render_start_x + 10 * $unit_width,
  $render_start_y - $unit_height * $cur_row + $text_bottom_padding
);
$text-&gt;font($font, $font_size_default);
$text-&gt;text($delivery_date);
$gfx-&gt;move($render_start_x, $render_start_y - $unit_height * $cur_row);
$gfx-&gt;hline($render_start_x + $receive_company_end_tds_count * $unit_width);
$gfx-&gt;linewidth($line_width_basic);
$gfx-&gt;stroke;
$cur_row += 2.8;

# 請求メッセージ
$text-&gt;translate($render_start_x, $render_start_y - $unit_height * $cur_row + $text_bottom_padding);
$text-&gt;font($font, $font_size_default);
$text-&gt;text('下記の通り、ご請求申し上げます。');
$cur_row += 2;

# 金額
my $price_total_top_label = '金額';
$text-&gt;translate($render_start_x, $render_start_y - $unit_height * $cur_row + $text_bottom_padding);
$text-&gt;font($font, $font_size_default);
$text-&gt;text($price_total_top_label);
my $price_total_top = "￥${price_total_disp}円";
$text-&gt;translate(
  $render_start_x + 48 * $unit_width,
  $render_start_y - $unit_height * $cur_row + $text_bottom_padding
);
$text-&gt;font($font, $font_size_default + 5);
$text-&gt;text_right($price_total_top);
my $price_total_top_zeikomi = '(税込)';
$text-&gt;translate(
  $render_start_x + 50 * $unit_width,
  $render_start_y - $unit_height * $cur_row + $text_bottom_padding
);
$text-&gt;font($font, $font_size_default);
$text-&gt;text($price_total_top_zeikomi);
$gfx-&gt;move($render_start_x, $render_start_y - $unit_height * $cur_row);
$gfx-&gt;hline($render_start_x + $receive_company_end_tds_count * $unit_width);
$gfx-&gt;move($render_start_x, $render_start_y - $unit_height * $cur_row - 2);
$gfx-&gt;hline($render_start_x + $receive_company_end_tds_count * $unit_width);
$gfx-&gt;linewidth($line_width_basic);
$gfx-&gt;stroke;
$cur_row += 0.5;

# 会社ロゴ挿入
my $logo_image_file = "$FindBin::Bin/logo.png";
my $logo_image_object = $pdf-&gt;image_png($logo_image_file);
my $logo_image_width = 60;
$gfx-&gt;image(
  $logo_image_object,
  $render_start_x + $send_company_start_tds_count * $unit_width,
  $render_start_y - $unit_height * $cur_logo_row - $logo_image_width,
  $logo_image_width,
  $logo_image_width,
);

# 請求者
my $sender_company_name = '木本システム株式会社';
$text-&gt;translate(
  $render_start_x + $send_company_start_tds_count * $unit_width,
  $render_start_y - $unit_height * $cur_right_row + $text_bottom_padding
);
$text-&gt;font($font, $font_size_default);
$text-&gt;text($sender_company_name);
$cur_right_row += 1;

# 郵便番号
my $sender_zip_code = '住所:123-4567';
$text-&gt;translate(
  $render_start_x + $send_company_start_tds_count * $unit_width,
  $render_start_y - $unit_height * $cur_right_row + $text_bottom_padding
);
$text-&gt;font($font, $font_size_default);
$text-&gt;text($sender_zip_code);
$cur_right_row += 1;

# 住所
my $sender_address = '東京都港区〇〇 １２３－４';
$text-&gt;translate(
  $render_start_x + $send_company_start_tds_count * $unit_width,
  $render_start_y - $unit_height * $cur_right_row + $text_bottom_padding
);
$text-&gt;font($font, $font_size_default);
$text-&gt;text($sender_address);
$cur_right_row += 1;

# 電話番号
my $sender_tel = 'TEL:090-1234-5678';
$text-&gt;translate(
  $render_start_x + $send_company_start_tds_count * $unit_width,
  $render_start_y - $unit_height * $cur_right_row + $text_bottom_padding
);
$text-&gt;font($font, $font_size_default);
$text-&gt;text($sender_tel);
$cur_right_row += 1;

# FAX
my $sender_fax = 'FAX:090-1234-5679';
$text-&gt;translate(
  $render_start_x + $send_company_start_tds_count * $unit_width,
  $render_start_y - $unit_height * $cur_right_row + $text_bottom_padding
);
$text-&gt;font($font, $font_size_default);
$text-&gt;text($sender_fax);
$cur_right_row += 1;

# 担当
my $sender_staff = '担当:田中太郎';
$text-&gt;translate(
  $render_start_x + $send_company_start_tds_count * $unit_width,
  $render_start_y - $unit_height * $cur_right_row + $text_bottom_padding
);
$text-&gt;font($font, $font_size_default);
$text-&gt;text($sender_staff);

# 印鑑押印四角形
my $sleal_width = 55;
$gfx-&gt;rectxy(
  $render_start_x + $send_company_start_tds_count * $unit_width + $sleal_width * 2,
  $render_start_y - $unit_height * ($cur_right_row - 1) + $sleal_width,
  $render_start_x + $send_company_start_tds_count * $unit_width + $sleal_width * 3,
  $render_start_y - $unit_height * ($cur_right_row - 1)
);
$gfx-&gt;rectxy(
  $render_start_x + $send_company_start_tds_count * $unit_width,
  $render_start_y - $unit_height * $cur_right_row ,
  $render_start_x + $send_company_start_tds_count * $unit_width + $sleal_width * 3,
  $render_start_y - $unit_height * $cur_right_row - $sleal_width 
);
$gfx-&gt;poly(
  $render_start_x + $send_company_start_tds_count * $unit_width + $sleal_width,
  $render_start_y - $unit_height * $cur_right_row ,
  $render_start_x + $send_company_start_tds_count * $unit_width + $sleal_width,
  $render_start_y - $unit_height * $cur_right_row - $sleal_width 
);
$gfx-&gt;poly(
  $render_start_x + $send_company_start_tds_count * $unit_width + $sleal_width * 2,
  $render_start_y - $unit_height * $cur_right_row ,
  $render_start_x + $send_company_start_tds_count * $unit_width + $sleal_width * 2,
  $render_start_y - $unit_height * $cur_right_row - $sleal_width 
);
$gfx-&gt;strokecolor('#bbb');
$gfx-&gt;stroke;

# 見積書見出し背景
$gfx-&gt;rectxy(
  $render_start_x, $render_start_y - $unit_height * $cur_row,
  $render_end_x, $render_start_y - $unit_height * ($cur_row + 1)
);
$gfx-&gt;fillcolor('#eee');
$gfx-&gt;fill;

# 見積書見出し上飾り太線
$gfx-&gt;move($render_start_x, $render_start_y - $unit_height * $cur_row);
$gfx-&gt;hline($render_end_x);
$gfx-&gt;linewidth($line_width_bold);
$gfx-&gt;strokecolor($color_black);
$gfx-&gt;stroke;
$cur_row += 1;

# 見積書見出し下飾り太線の位置を保存
my $header_bottom_line_row = $cur_row;

my $cur_column_units_count = 0;

# No
my $no_units_count = 10;
$text-&gt;translate($render_start_x + $cur_column_units_count * $unit_width + $text_left_padding, $render_start_y - $unit_height * $cur_row + $text_bottom_padding);
$text-&gt;font($font, $font_size_default);
$text-&gt;text('No.');
$cur_column_units_count += $no_units_count;

# 項目
my $name_units_count = 34;
$text-&gt;translate($render_start_x + $cur_column_units_count * $unit_width + ($name_units_count * $unit_width / 2), $render_start_y - $unit_height * $cur_row + $text_bottom_padding);
$text-&gt;font($font, $font_size_default);
$text-&gt;text_center('項目');
$cur_column_units_count += $name_units_count;

# 数量
my $count_units_count = 14;
$text-&gt;translate($render_start_x + $cur_column_units_count * $unit_width + ($count_units_count * $unit_width / 2), $render_start_y - $unit_height * $cur_row + $text_bottom_padding);
$text-&gt;font($font, $font_size_default);
$text-&gt;text_center('数量');
$cur_column_units_count += $count_units_count;

# 単価
my $unit_price_units_count = 14;
$text-&gt;translate($render_start_x + $cur_column_units_count * $unit_width + ($unit_price_units_count * $unit_width / 2), $render_start_y - $unit_height * $cur_row + $text_bottom_padding);
$text-&gt;font($font, $font_size_default);
$text-&gt;text_center('単価');
$cur_column_units_count += $unit_price_units_count;

# 金額
my $price_units_count = 28;
$text-&gt;translate($render_start_x + $cur_column_units_count * $unit_width + ($price_units_count * $unit_width / 2), $render_start_y - $unit_height * $cur_row + $text_bottom_padding);
$text-&gt;font($font, $font_size_default);
$text-&gt;text_center('金額');
$cur_column_units_count = 0;

$cur_row++;

my $rows_count = 25;

# 各項目の枠の描画
for (my $row = 0; $row &lt; $rows_count; $row++) {
  my $book = $books-&gt;[$row];
  
  # 行を交互に塗り分ける
  if ($row % 2 == 1) {
    $gfx-&gt;rectxy(
      $render_start_x,
      $render_start_y - $unit_height * $cur_row,
      $render_end_x,
      $render_start_y - $unit_height * ($cur_row - 1),
    );
    $gfx-&gt;fillcolor('#eee');
    $gfx-&gt;fill;
  }
  
  # No
  if ($book) {
    $text-&gt;translate(
      $render_start_x + $cur_column_units_count * $unit_width + $text_left_padding,
      $render_start_y - $unit_height * $cur_row + $text_bottom_padding
    );
    $text-&gt;font($font, $font_size_default);
    $text-&gt;text($row + 1);
  }
  $cur_column_units_count += $no_units_count;

  # 項目
  $gfx-&gt;poly(
    $render_start_x + $cur_column_units_count * $unit_width,
    $render_start_y - $unit_height * $cur_row,
    $render_start_x + $cur_column_units_count * $unit_width,
    $render_start_y - $unit_height * ($cur_row - 1)
  );
  $gfx-&gt;linewidth(1.5);
  $gfx-&gt;strokecolor('#ccc');
  $gfx-&gt;stroke;
  if ($book) {
    $text-&gt;translate(
      $render_start_x + $cur_column_units_count * $unit_width + $text_left_padding,
      $render_start_y - $unit_height * $cur_row + $text_bottom_padding
    );
    $text-&gt;font($font, $font_size_default);
    $text-&gt;text($book-&gt;{name});
  }
  $cur_column_units_count += $name_units_count;

  # 数量
  $gfx-&gt;poly(
    $render_start_x + $cur_column_units_count * $unit_width,
    $render_start_y - $unit_height * $cur_row,
    $render_start_x + $cur_column_units_count * $unit_width,
    $render_start_y - $unit_height * ($cur_row - 1)
  );
  $gfx-&gt;linewidth(1.5);
  $gfx-&gt;strokecolor('#ccc');
  $gfx-&gt;stroke;
  if ($book) {
    $text-&gt;translate(
      $render_start_x + $cur_column_units_count * $unit_width + ($count_units_count * $unit_width) - $text_left_padding,
      $render_start_y - $unit_height * $cur_row + $text_bottom_padding
    );
    $text-&gt;font($font, $font_size_default);
    $text-&gt;text_right($book-&gt;{count});
  }
  $cur_column_units_count += $count_units_count;

  # 単価
  $gfx-&gt;poly(
    $render_start_x + $cur_column_units_count * $unit_width,
    $render_start_y - $unit_height * $cur_row,
    $render_start_x + $cur_column_units_count * $unit_width,
    $render_start_y - $unit_height * ($cur_row - 1)
  );
  $gfx-&gt;linewidth(1.5);
  $gfx-&gt;strokecolor('#ccc');
  $gfx-&gt;stroke;
  if ($book) {
    $text-&gt;translate(
      $render_start_x + $cur_column_units_count * $unit_width + ($unit_price_units_count * $unit_width) - $text_left_padding,
      $render_start_y - $unit_height * $cur_row + $text_bottom_padding
    );
    $text-&gt;font($font, $font_size_default);
    my $unit_price_disp = price_disp($book-&gt;{unit_price});
    $text-&gt;text_right($unit_price_disp);
  }
  $cur_column_units_count += $unit_price_units_count;

  # 金額
  $gfx-&gt;poly(
    $render_start_x + $cur_column_units_count * $unit_width,
    $render_start_y - $unit_height * $cur_row,
    $render_start_x + $cur_column_units_count * $unit_width,
    $render_start_y - $unit_height * ($cur_row - 1)
  );
  $gfx-&gt;linewidth(1.5);
  $gfx-&gt;strokecolor('#ccc');
  $gfx-&gt;stroke;
  if ($book) {
    $text-&gt;translate(
      $render_start_x + $cur_column_units_count * $unit_width + ($price_units_count * $unit_width) - $text_left_padding,
      $render_start_y - $unit_height * $cur_row + $text_bottom_padding
    );
    $text-&gt;font($font, $font_size_default);
    my $price_disp = price_disp($book-&gt;{unit_price} * $book-&gt;{count});
    $text-&gt;text_right($price_disp);
  }
  $cur_column_units_count = 0;

  $cur_row++;
}

# 見積書見出し下飾り太線(灰色の縦線の上に書くためこの位置で描画)
$gfx-&gt;move($render_start_x, $render_start_y - $unit_height * $header_bottom_line_row);
$gfx-&gt;hline($render_end_x);
$gfx-&gt;linewidth($line_width_bold);
$gfx-&gt;strokecolor($color_black);
$gfx-&gt;stroke;

# 太線
$gfx-&gt;move($render_start_x, $render_start_y - $unit_height * ($cur_row - 1));
$gfx-&gt;hline($render_end_x);
$gfx-&gt;linewidth($line_width_bold);
$gfx-&gt;strokecolor($color_black);
$gfx-&gt;stroke;

# 小計
my $price_total_no_tax_label = '小計';
$text-&gt;translate($render_start_x + ($no_units_count + $name_units_count + $count_units_count) * $unit_width + $text_left_padding, $render_start_y - $unit_height * $cur_row + $text_bottom_padding);
$text-&gt;font($font, $font_size_default);
$text-&gt;text($price_total_no_tax_label);
$text-&gt;translate($render_end_x, $render_start_y - $unit_height * $cur_row + $text_bottom_padding);
$text-&gt;font($font, $font_size_default);
$text-&gt;text_right($price_total_no_tax_disp);
$cur_row += 1;

# 消費税
my $tax_label = '消費税';
$text-&gt;translate($render_start_x + ($no_units_count + $name_units_count + $count_units_count) * $unit_width + $text_left_padding, $render_start_y - $unit_height * $cur_row + $text_bottom_padding);
$text-&gt;font($font, $font_size_default);
$text-&gt;text($tax_label);
$text-&gt;translate($render_end_x, $render_start_y - $unit_height * $cur_row + $text_bottom_padding);
$text-&gt;font($font, $font_size_default);
$text-&gt;text_right($tax_disp);
$cur_row += 1;

# 消費税
my $price_total_label = '税込合計';
$text-&gt;translate($render_start_x + ($no_units_count + $name_units_count + $count_units_count) * $unit_width + $text_left_padding, $render_start_y - $unit_height * $cur_row + $text_bottom_padding);
$text-&gt;font($font, $font_size_default);
$text-&gt;text($price_total_label);
$text-&gt;translate($render_end_x, $render_start_y - $unit_height * $cur_row + $text_bottom_padding);
$text-&gt;font($font, $font_size_default);
$text-&gt;text_right("￥$price_total_disp");
$cur_row += 1;

# 太線
$gfx-&gt;move($render_start_x, $render_start_y - $unit_height * ($cur_row - 1));
$gfx-&gt;hline($render_end_x);
$gfx-&gt;linewidth($line_width_bold);
$gfx-&gt;strokecolor($color_black);
$gfx-&gt;stroke;

# 振込先
my $furikomi_disp = &lt;&lt;"EOS";
お振込先
みずほ銀行芝支店
普通口座 34521xx
木本システム株式会社
EOS
for my $line (split /\n/, $furikomi_disp) {
  $text-&gt;translate($render_start_x, $render_start_y - $unit_height * $cur_row + $text_bottom_padding);
  $text-&gt;font($font, $font_size_default);
  $text-&gt;text($line);
  $cur_row += 1;
}

# 細い線
$gfx-&gt;move($render_start_x, $render_start_y - $unit_height * ($cur_row - 1));
$gfx-&gt;hline($render_end_x);
$gfx-&gt;linewidth($line_width_basic);
$gfx-&gt;strokecolor($color_black);
$gfx-&gt;stroke;

# 備考
my $bikou_disp = &lt;&lt;"EOS";
納品日の翌月の末日までのお支払いをお願いいたします。
EOS
for my $line (split /\n/, $bikou_disp) {
  $text-&gt;translate($render_start_x, $render_start_y - $unit_height * $cur_row + $text_bottom_padding);
  $text-&gt;font($font, $font_size_default);
  $text-&gt;text($line);
  $cur_row += 1;
}

# 太線
$gfx-&gt;move($render_start_x, $render_end_y);
$gfx-&gt;hline($render_end_x);
$gfx-&gt;linewidth($line_width_bold);
$gfx-&gt;strokecolor($color_black);
$gfx-&gt;stroke;

# 3桁区切りで金額を表示してくれるサブルーチン
sub price_disp {
  my ($price) = @_;
  
  1 while $price =~ s/(.*\d)(\d\d\d)/$1,$2/;
  
  return $price;
}


my $pdf_file = 'invoice.pdf';
$pdf-&gt;saveas($pdf_file);
</pre>

<div style="font-weight:bold;font-size:18px;letter-spacing:2px;margin:35px 0 0px 0;padding-left:5px;padding-top:5px;border-top:2px solid #ddd">2020/01/02</div>
<ol class="bread" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemprop="item" href="/">
        <span itemprop="name">Perl</span></a>
    <meta itemprop="position" content="1" />
  </li>
  &#8250;
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemprop="item" href="/blog/20191228171433.html">
      <span itemprop="name">帳票作成</span></a>
    <meta itemprop="position" content="2" />
  </li>
  &#8250;
  <li>
    here
  </li>
</ol>
<h2><a href="/blog/20200102105023.html">PDFファイルをブラウザから確認する方法</a></h2>
<p>
  PDFファイルをブラウザから確認する方法を解説します。
</p>
<p>
  PDF::API2を使って、プログラムでPDFファイルを作成している場合、PDFを開いて確認するのが、少し面倒に感じます。
</p>
<p>
  また<a href="https://linux.perlzemi.com/">Linux</a>を使って、PDFを生成した場合に、ダウンロードして確認するのは、大変です。
</p>
<p>
  WebサーバーでPDFファイルを配信して、Webブラウザで確認できると便利です。Webブラウザは、PDF表示に対応していますので、これを利用しましょう。
</p>
<h3>Mojoliciousを使ってWebサーバーを起動する</h3>
<p>
  静的ファイルを配信するWebサーバーを、起動するには、<a href="https://web.perlzemi.com/">Mojolicious</a>を使うのが、簡単です。
</p>
<h4>Webサーバーのプログラム</h4>
<p>
  Webサーバーのプログラムを以下のように記述しましょう。名前は、serve.plにします。
</p>
<pre>
# serve.pl
use Mojolicious::Lite;

app-&gt;start;
</pre>
<p>
  デフォルトでは、静的ファイルのディレクトリは「public」というディレクトリなので、PDFファイルを出力するディレクトリに変更しましょう。PDFファイルをカレントディレクトリに出力している場合は、静的ファイルのディレクトリをカレントディレクトリに変更すると、よいでしょう。
</p>
<pre>
# serve.pl
use Mojolicious::Lite;

# 静的ファイルの配信ディレクトリを変更
app-&gt;static-&gt;paths(['.']);

app-&gt;start;
</pre>
<h4>Webサーバーの起動</h4>
<p>
  Webサーバーを起動するには、morboコマンドを使用します。
</p>
<pre>
morbo serve.pl
</pre>
<p>
  これでWebサーバーが起動します。以下のURLでアクセスできます。デフォルトのポートは3000番です。
</p>
<pre>
# ローカルPCの場合
http://127.0.0.1:3000

# リモートのLinuxの場合
http://サーバーのIPアドレスあるいはドメイン名:3000
</pre>
<h4>ポート番号の変更</h4>
<p>
  ポート番号をデフォルトの3000番以外に変えるには、「MOJO_LISTEN」環境変数を使用します。以下は、3001番に変えるサンプルです。
</p>
<pre>
MOJO_LISTEN=http://*:3001 morbo serve.pl
</pre>

<div style="font-weight:bold;font-size:18px;letter-spacing:2px;margin:35px 0 0px 0;padding-left:5px;padding-top:5px;border-top:2px solid #ddd">2020/01/01</div>
<ol class="bread" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemprop="item" href="/">
        <span itemprop="name">Perl</span></a>
    <meta itemprop="position" content="1" />
  </li>
  &#8250;
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemprop="item" href="/blog/20191228171433.html">
      <span itemprop="name">帳票作成</span></a>
    <meta itemprop="position" content="2" />
  </li>
  &#8250;
  <li>
    here
  </li>
</ol>
<h2><a href="/blog/20200101082734.html">基本図形の描画と表の作成 - PDF::API2で帳票作成</a></h2>
<p>
  PDF::API2で、表を作成する方法を解説します。
</p>
<p>
  PDF::API2には、直線や塗りつぶし可能な円、三角形、四角形、それ以上の多角形を作成できる機能があります。
</p>
<p>
  直線を書くことができれば、それを組み合わせて表を作成することができます。表に背景色を設定したい場合は、塗りつぶし可能な四角形を書くことで実現できます。
</p>
<p>
  HTMLのテーブルは表を作成するのに使えます。ここでは、以下の構造をPDFの表として表現できるようにしてみましょう。
</p>
<pre>
&lt;table&gt;
  &lt;tr&gt;&lt;td&gt;見出し1&lt;/td&gt;&lt;td&gt;見出し2&lt;/td&gt;&lt;td&gt;見出し3&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;項目&lt;/td&gt;&lt;td&gt;項目&lt;/td&gt;&lt;td&gt;項目&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;項目&lt;/td&gt;&lt;td&gt;項目&lt;/td&gt;&lt;td&gt;項目&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
</pre>
<table>
  <tr><td>見出し1</td><td>見出し2</td><td>見出し3</td></tr>
  <tr><td>項目</td><td>項目</td><td>項目</td></tr>
  <tr><td>項目</td><td>項目</td><td>項目</td></tr>
</table>
<h3>基本的な図形を描画する</h3>
<p>
  まず最初に、表を作成するための基礎として、PDF::API2で基本的な図形を描画してみましょう。
</p>
<h4>グラフィック用のコンテンツオブジェクトを生成</h4>
<p>
  まず最初に、グラフィック用のコンテンツオブジェクトを生成します。ページオブジェクトからgfxメソッドを呼び出すことで、グラフィック用のコンテンツオブジェクトを生成できます。これはPDF::API2::Contentオブジェクトです。
</p>
<pre>
# PDFオブジェクトの生成
my $pdf = PDF::API2-&gt;new;

# ページの作成
my $page = $pdf-&gt;page;

# グラフィック用のコンテンツオブジェクトの生成
my $gfx = $page-&gt;gfx;
</pre>
<h4>線を書く</h4>
<p>
  最も基本的な描画として、PDF::API2で線を書いてみましょう。
</p>
<p>
  moveメソッドで、新しいパスが作成され、始点に移動します。lineメソッドで、パスを終点まで移動します。
</p>
<p>
  まだ、実際に線は書かれません。実際に線を書くには、strokeメソッドを呼び出します。
</p>
<pre>
# 線の始点の設定
my $start_x = 100;
my $start_y = 100;
$gfx-&gt;move($start_x, $start_y);

# 線の終点を設定
my $end_x = 300;
my $end_y = 300;
$gfx-&gt;line($end_x, $end_y);

# 線を描画
$gfx-&gt;stroke;
</pre>
<p>
  PDF::API2の図形の描画では、パスをつなげて描画するという感覚を覚えてください。
</p>
<h4>線の太さを設定</h4>
<p>
  線の太さは、linewidthメソッドで、設定できます。strokeする前に呼び出してください。
</p>
<pre>
# 線の太さの設定
$gfx-&gt;linewidth(3);
</pre>
<p>
  線の幅は、円や多角形を書くときの設定の場合も同じです。
</p>
<h4>線の色を設定</h4>
<p>
  線の色は、strokecolorメソッドで、設定できます。strokeする前に呼び出してください。色は、色名、RGB、CMYKで指定できます。各色に1バイト、2バイト、3バイト、または4バイトの値を持つことができます。たとえば、シアンは%F000または、%FFFF000000000000として設定できます。
</p>
<pre>
# 線の色を設定(色名)
$gfx-&gt;strokecolor('red');

# 線の色を設定(RGB)
$gfx-&gt;strokecolor('#0123ab');

# 線の色を設定(CMYK)
$gfx-&gt;strokecolor('%FF000000');
</pre>
<p>
  線の色は、円や多角形を書くときの設定の場合も同じです。
</p>
<p>
  色の書式は、塗りつぶしの色の設定の場合も同じです。
</p>
<h4>線で囲んで三角形を書く</h4>
<p>
  線を書く応用として、線で囲んで三角形を書いてみましょう。lineメソッドで、点をつなげて、最後に始点に戻ります。
</p>
<pre>
use strict;
use warnings;
use utf8;

use PDF::API2;

# PDFオブジェクトの生成
my $pdf = PDF::API2-&gt;new;

my $page = $pdf-&gt;page;

my $gfx = $page-&gt;gfx;

# 点P1
my $x1 = 100;
my $y1 = 100;
$gfx-&gt;move($x1, $y1);

# 点P2
my $x2 = 300;
my $y2 = 300;
$gfx-&gt;line($x2, $y2);

# 点P3
my $x3 = 500;
my $y3 = 100;
$gfx-&gt;line($x3, $y3);

# 点P1に戻る
$gfx-&gt;line($x1, $y1);

# 線を描画
$gfx-&gt;stroke;

my $pdf_file = 'render_tri.pdf';
$pdf-&gt;saveas($pdf_file);
</pre>
<p>
  <a href="/examples/pdf/render_tri.pdf">出力結果 三角形</a>
</p>
<p>
  polyメソッドを使うと、moveする点を設定して、複数の点を渡して、連続した線を描画できます。
</p>
<pre>
use strict;
use warnings;
use utf8;

use PDF::API2;

# PDFオブジェクトの生成
my $pdf = PDF::API2-&gt;new;

my $page = $pdf-&gt;page;

my $gfx = $page-&gt;gfx;

# 点P1
my ($x1, $y1) = (100, 100);

# 点P2
my ($x2, $y2) = (300, 300);

# 点P3
my ($x3, $y3) = (500, 100);

# polyメソッドで、三角形を一度に描画
$gfx-&gt;poly($x1, $y1, $x2, $y2, $x3, $y3, $x1, $y1);

# 線を描画
$gfx-&gt;stroke;

my $pdf_file = 'render_tri.pdf';
$pdf-&gt;saveas($pdf_file);
</pre>
<h4>塗りつぶす</h4>
<p>
  パスで囲むと、塗りつぶすことができます。塗りつぶすにはfillメソッドを使用します。塗りつぶしのデフォルト色は、黒です。fillは、strokeの前に呼び出す必要があることに注意してください。
</p>
<pre>
# 塗りつぶす(strokeの前で)
$gfx-&gt;fill;

# 線を書く
$gfx-&gt;stroke;
</pre>
<p>
  塗りつぶしと線を書くのを同時に行うfillstrokeメソッドもあります。
</p>
<pre>
# 塗りつぶして、線を書く
$gfx-&gt;fillstroke;
</pre>
<h4>塗りつぶしの色を設定</h4>
<p>
  塗りつぶしの色は、fillcolorメソッドで、設定できます。fillする前に呼び出してください。色は、色名、RGB、CMYKで指定できます。各色に1バイト、2バイト、3バイト、または4バイトの値を持つことができます。たとえば、シアンは%F000または、%FFFF000000000000として設定できます。
</p>
<pre>
# 塗りつぶしの色を設定(色名)
$gfx-&gt;fillcolor('red');

# 塗りつぶしの色を設定(RGB)
$gfx-&gt;fillcolor('#0123ab');

# 塗りつぶしの色を設定(CMYK)
$gfx-&gt;fillcolor('%FF000000');
</pre>
<h3>四角形を書く</h3>
<p>
  PDF::API2には、四角形を書くための便利なメソッドがあります。すべての図形は、上記の方法で、線をつなげて作成できますが、線をつなげる方法は、手順が多いので、四角形などの基本的な図形を描画するメソッドが、準備されています。
</p>
<p>
  四角形を作成して、薄いグレーで、背景を塗りつぶしてみましょう。四角形を書くには、rectメソッドとrectxyメソッドがありますが、始点と対角線の向かい側の点を指定するだけで、四角形が書けるrectxyを使ってみましょう。
</p>
<pre>
use strict;
use warnings;
use utf8;

use PDF::API2;

# PDFオブジェクトの生成
my $pdf = PDF::API2-&gt;new;

# ページの作成
my $page = $pdf-&gt;page;

# グラフィック用のコンテンツオブジェクトの生成
my $gfx = $page-&gt;gfx;

# 点P1
my $x1 = 100;
my $y1 = 100;

# 対角線の向かいの点P3
my $x3 = 300;
my $y3 = 300;

# 四角形を描画
$gfx-&gt;rectxy($x1, $y1, $x3, $y3);

# 線の色を、黒より少し薄い色に
$gfx-&gt;strokecolor('#333');

# 背景色をとても薄いグレーに
$gfx-&gt;fillcolor('#eee');

# 四角形を塗りつぶして線を描画
$gfx-&gt;fillstroke;

my $pdf_file = 'basic_rect.pdf';
$pdf-&gt;saveas($pdf_file);
</pre>
<p>
  そのまま実行できる四角形を描画できるサンプルです。
</p>
<h3>その他の基本図形を書く</h3>
<p>
  その他の基本図形を書きたい場合に、どのメソッドを使うのかを紹介しておきます。
</p>
<h4>円を書く</h4>
<p>
  円を書く場合は、circleメソッドを使用します。リストの箇条書きの●などに利用できます。
</p>
<h4>楕円を書く</h4>
<p>
  楕円を書く場合は、ellipseメソッドを使用します。
</p>
<h4>扇形を書く</h4>
<p>
  扇形を書きたい場合は、pieメソッドを使用します。
</p>
<h4>円弧を書く</h4>
<p>
  円弧を書く場合は、arcあるいはbogenメソッドを使用します。bogenメソッドは、円弧の始点と終点を指定できるので、角丸などに利用できます。
</p>
<h4>楕円の円弧を書く</h4>
<p>
  楕円の円弧を書く場合は、bogenメソッドを使用します。
</p>
<h4>曲線(ペジェ曲線)を書く</h4>
<p>
  曲線(ペジェ曲線)を書くには、curveメソッドを使用します。ペジェ曲線のアルゴリズムによる曲線が書けます。
</p>
<h4>曲線(スプライン曲線)を書く</h4>
<p>
  曲線(スプライン曲線)を書くには、splineメソッドを使用します。点を滑らかにつなげた曲線が書けます。
</p>
<h4>多角形を描画する</h4>
<p>
  多角形を描画するには、polyメソッドを使用します。三角形や、五角形や六角形などを描画できます。
</p>
<h4>図形を回転させる</h4>
<p>
  図形を回転させるには、rotateメソッドを使用します。
</p>
<h4>図形を拡大・縮小する</h4>
<p>
  図形を拡大・縮小させるには、scaleメソッドを使用します。
</p>
<h4>水平線を引くには</h4>
<p>
  水平線を簡易的に描画できるhlineメソッドがあります。
</p>
<h4>縦線を引くには</h4>
<p>
  縦線を簡易的に描画できるvlineメソッドがあります。
</p>
<h4>破線を引くには</h4>
<p>
  波線を引くには、linedashメソッドを使用します。
</p>
<h3>表を作成する</h3>
<p>
  では、表を作成してみましょう。
</p>
<p>
  表の考え方は、まず一番外側に、枠があります。それぞれの項目に対しても枠があります。項目の枠と外枠を重ねることができれば、表の完成です。四角形を組み合わせて、外側を重ねることで、描画できそうです。
</p>
<p>
  でも、この方法問題点が発覚しました。同じに位置に二回描画すると、線が濃くなってしまうのです。
</p>
<p>
  ですので、縦と横に線を引くというシンプルな方法で、表を作成してみます。
</p>
<pre>
use PDF::API2;

# PDFオブジェクトの生成
my $pdf = PDF::API2-&gt;new;

# 用紙サイズのデフォルトのグローバル設定(用紙サイズを取得するため)
$pdf-&gt;mediabox(undef);

# ページの高さと幅
my @page_size_infos = $pdf-&gt;mediabox;
my $page_width = $page_size_infos[2];
my $page_height = $page_size_infos[3];

# 項目の高さ
my $item_height = 25;

# 行の数
my $rows_count = 20;

# 各項目の幅
my $name_width = 230;
my $unit_price_width = 80;
my $count_width = 80;
my $price_width = 80;
my $table_width = $name_width + $unit_price_width + $count_width + $price_width;

# テーブルの高さ
my $table_height = $item_height * $rows_count;

# テーブルの始点

# 表の外枠
my $table_start_x = 50;
my $table_start_y = $page_height - 50;
my $table_other_side_x = $table_start_x + $table_width;
my $table_other_side_y = $table_start_y - $table_height;

# ページの作成
my $page = $pdf-&gt;page;

# グラフィック用のコンテンツオブジェクトの生成
my $gfx = $page-&gt;gfx;

# 上の線を引く
$gfx-&gt;move($table_start_x, $table_start_y);
$gfx-&gt;line($table_start_x + $table_width, $table_start_y);

# 左の線を引く
$gfx-&gt;move($table_start_x, $table_start_y);
$gfx-&gt;line($table_start_x, $table_start_y - $table_height);

my $cur_x = $table_start_x;
my $cur_y = $table_start_y;

# 各項目の枠の描画
for (my $column = 0; $column &lt; $rows_count; $column++) {
  
  # 名前の枠(右と下)
  $gfx-&gt;move($cur_x + $name_width, $cur_y);
  $gfx-&gt;line($cur_x + $name_width, $cur_y - $item_height);
  $gfx-&gt;move($cur_x, $cur_y - $item_height);
  $gfx-&gt;line($cur_x + $name_width, $cur_y - $item_height);
  $cur_x += $name_width;

  # 単価の枠(右と下)
  $gfx-&gt;move($cur_x + $unit_price_width, $cur_y);
  $gfx-&gt;line($cur_x + $unit_price_width, $cur_y - $item_height);
  $gfx-&gt;move($cur_x, $cur_y - $item_height);
  $gfx-&gt;line($cur_x + $unit_price_width, $cur_y - $item_height);
  $cur_x += $unit_price_width;

  # 数量の枠(右と下)
  $gfx-&gt;move($cur_x + $count_width, $cur_y);
  $gfx-&gt;line($cur_x + $count_width, $cur_y - $item_height);
  $gfx-&gt;move($cur_x, $cur_y - $item_height);
  $gfx-&gt;line($cur_x + $count_width, $cur_y - $item_height);
  $cur_x += $count_width;

  # 価格の枠(右と下)
  $gfx-&gt;move($cur_x + $price_width, $cur_y);
  $gfx-&gt;line($cur_x + $price_width, $cur_y - $item_height);
  $gfx-&gt;move($cur_x, $cur_y - $item_height);
  $gfx-&gt;line($cur_x + $price_width, $cur_y - $item_height);
  $cur_x += $price_width;
  
  # 次の行へ
  $cur_x = $table_start_x;
  $cur_y -= $item_height;
}

# 線の色を、黒より少し薄い色に
$gfx-&gt;strokecolor('#333');

# 四角形を塗りつぶして線を描画
$gfx-&gt;stroke;

my $pdf_file = 'table.pdf';
$pdf-&gt;saveas($pdf_file);
</pre>
<p>
  情報が何も入っていない表が完成しました。
</p>
<p>
  <a href="/examples/pdf/table.pdf">出力結果 空の表</a>、
</p>
<h4>見出しと項目が入った表のサンプル</h4>
<p>
  最後に、見出しと項目が入った表のサンプルを作成してみましょう。
</p>
<p>
  PDFに以下の表が書き出されます。
</p>
<table>
  <tr><th>Name</th><th>Unit</th><th>Count</th><th>Price</th></tr>
  <tr><td>Book1</td><td>1000</td><td>3</td><td>3000</td></tr>
  <tr><td>Book2</td><td>2000</td><td>6</td><td>12000</td></tr>
  <tr><td>Book3</td><td>1500</td><td>5</td><td>7500</td></tr>
</table>
<div style="margin-bottom:10px"></div>
<pre>
use strict;
use warnings;
use utf8;

use PDF::API2;

# PDFオブジェクトの生成
my $pdf = PDF::API2-&gt;new;

# 用紙サイズのデフォルトのグローバル設定(用紙サイズを取得するため)
$pdf-&gt;mediabox(undef);

# ページの高さと幅
my @page_size_infos = $pdf-&gt;mediabox;
my $page_width = $page_size_infos[2];
my $page_height = $page_size_infos[3];

# 項目の高さ
my $item_height = 25;

# 行の数
my $rows_count = 20;

# 各項目の幅
my $name_width = 230;
my $unit_price_width = 80;
my $count_width = 80;
my $price_width = 80;
my $table_width = $name_width + $unit_price_width + $count_width + $price_width;

# テーブルの高さ
my $table_height = $item_height * $rows_count;

# テーブルの始点

# 表の外枠
my $table_start_x = 50;
my $table_start_y = $page_height - 50;
my $table_other_side_x = $table_start_x + $table_width;
my $table_other_side_y = $table_start_y - $table_height;

# ページの作成
my $page = $pdf-&gt;page;

# グラフィック用のコンテンツオブジェクトの生成
my $gfx = $page-&gt;gfx;

# テキスト用のコンテンツオブジェクトの生成
my $text = $page-&gt;text;
my $font = $pdf-&gt;corefont('Helvetica');
my $font_bold = $pdf-&gt;corefont('Helvetica-Bold');
my $font_size = 11;
$text-&gt;font($font, $font_size);
my $text_height = $font_size;

my $books = [
  {
    name =&gt; 'Book1',
    unit_price =&gt; 1000,
    count =&gt; 3,
  },
  {
    name =&gt; 'Book2',
    unit_price =&gt; 2000,
    count =&gt; 6,
  },
  {
    name =&gt; 'Book3',
    unit_price =&gt; 1500,
    count =&gt; 5,
  }
];
my $books_length = @$books;

# 上の線を引く
$gfx-&gt;move($table_start_x, $table_start_y);
$gfx-&gt;line($table_start_x + $table_width, $table_start_y);

# 左の線を引く
$gfx-&gt;move($table_start_x, $table_start_y);
$gfx-&gt;line($table_start_x, $table_start_y - $table_height);

my $cur_x = $table_start_x;
my $cur_y = $table_start_y;

my $item_padding_top = 17;
my $item_padding_left = 5;

# 各項目の枠の描画
for (my $column = 0; $column &lt; $rows_count; $column++) {
  
  my $book_index = $column - 1;
  
  # 名前の枠(右と下)
  # 見出し
  $text-&gt;translate($cur_x + $item_padding_left, $cur_y - $item_padding_top);
  if ($column == 0) {
    $text-&gt;font($font_bold, $font_size);
    $text-&gt;text('Name');
  }
  # 項目
  else {
    $text-&gt;font($font, $font_size);
    if ($book_index &lt; $books_length) {
      $text-&gt;text($books-&gt;[$book_index]{name});
    }
  }
  $gfx-&gt;move($cur_x + $name_width, $cur_y);
  $gfx-&gt;line($cur_x + $name_width, $cur_y - $item_height);
  $gfx-&gt;move($cur_x, $cur_y - $item_height);
  $gfx-&gt;line($cur_x + $name_width, $cur_y - $item_height);
  $cur_x += $name_width;

  # 単価の枠(右と下)
  $text-&gt;translate($cur_x + $item_padding_left, $cur_y - $item_padding_top);
  if ($column == 0) {
    $text-&gt;font($font_bold, $font_size);
    $text-&gt;text('Unit');
  }
  # 項目
  else {
    $text-&gt;font($font, $font_size);
    if ($book_index &lt; $books_length) {
      $text-&gt;text($books-&gt;[$book_index]{unit_price});
    }
  }
  $gfx-&gt;move($cur_x + $unit_price_width, $cur_y);
  $gfx-&gt;line($cur_x + $unit_price_width, $cur_y - $item_height);
  $gfx-&gt;move($cur_x, $cur_y - $item_height);
  $gfx-&gt;line($cur_x + $unit_price_width, $cur_y - $item_height);
  $cur_x += $unit_price_width;

  # 数量の枠(右と下)
  # 見出し
  $text-&gt;translate($cur_x + $item_padding_left, $cur_y - $item_padding_top);
  if ($column == 0) {
    $text-&gt;font($font_bold, $font_size);
    $text-&gt;text('Count');
  }
  # 項目
  else {
    $text-&gt;font($font, $font_size);
    if ($book_index &lt; $books_length) {
      $text-&gt;text($books-&gt;[$book_index]{count});
    }
  }
  $gfx-&gt;move($cur_x + $count_width, $cur_y);
  $gfx-&gt;line($cur_x + $count_width, $cur_y - $item_height);
  $gfx-&gt;move($cur_x, $cur_y - $item_height);
  $gfx-&gt;line($cur_x + $count_width, $cur_y - $item_height);
  $cur_x += $count_width;

  # 価格の枠(右と下)
  # 見出し
  $text-&gt;translate($cur_x + $item_padding_left, $cur_y - $item_padding_top);
  if ($column == 0) {
    $text-&gt;font($font_bold, $font_size);
    $text-&gt;text('Pirce');
  }
  # 項目
  else {
    $text-&gt;font($font, $font_size);
    if ($book_index &lt; $books_length) {
      $text-&gt;text($books-&gt;[$book_index]{unit_price} * $books-&gt;[$book_index]{count});
    }
  }
  $gfx-&gt;move($cur_x + $price_width, $cur_y);
  $gfx-&gt;line($cur_x + $price_width, $cur_y - $item_height);
  $gfx-&gt;move($cur_x, $cur_y - $item_height);
  $gfx-&gt;line($cur_x + $price_width, $cur_y - $item_height);
  $cur_x += $price_width;
  
  # 次の行へ
  $cur_x = $table_start_x;
  $cur_y -= $item_height;
}

# 線の色を、黒より少し薄い色に
$gfx-&gt;strokecolor('#333');

# 四角形を塗りつぶして線を描画
$gfx-&gt;stroke;

my $pdf_file = 'table_items.pdf';
$pdf-&gt;saveas($pdf_file);
</pre>
<p>
  <a href="/examples/pdf/table_items.pdf">出力結果 項目ありの表</a>
</p>

<div style="font-weight:bold;font-size:18px;letter-spacing:2px;margin:35px 0 0px 0;padding-left:5px;padding-top:5px;border-top:2px solid #ddd">2019/12/31</div>
<ol class="bread" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemprop="item" href="/">
        <span itemprop="name">Perl</span></a>
    <meta itemprop="position" content="1" />
  </li>
  &#8250;
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemprop="item" href="/blog/20191228171433.html">
      <span itemprop="name">帳票作成</span></a>
    <meta itemprop="position" content="2" />
  </li>
  &#8250;
  <li>
    here
  </li>
</ol>
<h2><a href="/blog/20191231143440.html">画像を挿入する - PDF::API2で帳票作成</a></h2>
<p>
  PDF::API2で、PNG,GIF,JPEGの画像を挿入する方法を解説します。
</p>
<p>
  PDFには、画像を含めることができます。PDF::API2では、PNG,GIF,JPEG画像を、PDFに挿入することができます。
</p>
<h3>画像ファイルの挿入</h3>
<p>
  画像ファイルを挿入するには、まず画像ファイルを読み込んで、画像表現するリソースオブジェクトを生成する必要があります。
</p>
<h4>画像ファイルの読み込み</h4>
<p>
  画像ファイルを読み込んで、画像表現するリソースオブジェクトを生成しましょう。
</p>
<p>
  <b>JPEGファイルの読み込み</b>
</p>
<p>
  PDF::API2で、JPEGファイルを読み込むには、image_jpegメソッドを使用します。JPEG画像を表現するリソースオブジェクトが返されます。
</p>
<pre>
# JPEG画像を表現するリソースオブジェクトを生成
my $image_file = '/path/image.jpeg';
my $image_object = $pdf-&gt;image_jpeg($image_file);
</pre>
<p>
  <b>PNGファイルの読み込み</b>
</p>
<p>
  PDF::API2で、PNGファイルを読み込むには、image_pngメソッドを使用します。PNG画像を表現するリソースオブジェクトが返されます。
</p>
<pre>
# PNG画像を表現するリソースオブジェクトを生成
my $image_file = '/path/image.png';
my $image_object = $pdf-&gt;image_png($image_file);
</pre>
<p>
  「Unsupported Interlace」というエラーがでた場合は、PNGのインターレース機能を解除する必要があります。
</p>
<p>
  <b>GIFファイルの読み込み</b>
</p>
<p>
  PDF::API2で、GIFファイルを読み込むには、image_gifメソッドを使用します。GIF画像を表現するリソースオブジェクトが返されます。
</p>
<pre>
# GIF画像を表現するリソースオブジェクトを生成
my $image_file = '/path/image.gif';
my $image_object = $pdf-&gt;image_gif($image_file);
</pre>
<h4>画像コンテンツオブジェクトの生成</h4>
<p>
  画像を挿入するための、コンテンツオブジェクトを生成します。これはPDF::API2::Contentオブジェクトです。
</p>
<pre>
# 画像を挿入するために必要なコンテンツオブジェクト
my $gfx = $page-&gt;gfx;
</pre>
<h4>画像ファイルの挿入</h4>
<p>
  PDF::API2で、画像ファイルを挿入するには、コンテンツオブジェクトのimageメソッドを使用します。
</p>
<pre>
# 指定した位置に画像を挿入
$gfx-&gt;image($image_object, $x, $y);

# 指定した位置に画像挿入。幅と高さを指定
$gfx-&gt;image($image_object, $x, $y, $width, $height);

# 指定した位置に画像挿入。スケールを指定(1.5倍など)
$gfx-&gt;image($image_object, $x, $y, $scale);
</pre>
<p>
  指定した位置に画像が挿入されます。
</p>
<p>
  幅と高さは、PDF単位であることに注意してください。座標は、右上に向かって進むので、指定した点から見て、右上に描画されることに注意してください。
</p>
<p>
  例として、600x600のイメージを600dpiの解像度で表示したい場合は、72を指定します。
</p>
<h3>PNG画像を挿入するサンプル</h3>
<p>
  PNG画像を挿入するサンプルを書いてみます。
</p>
<pre>
use PDF::API2;

my $pdf = PDF::API2-&gt;new;

my $page = $pdf-&gt;page;

# PNG画像を表現するリソースオブジェクトを生成
my $image_file = "$FindBin::Bin/rokkaku.png";
my $image_object = $pdf-&gt;image_png($image_file);

# 画像を挿入するために必要なコンテンツオブジェクト
my $gfx = $page-&gt;gfx;

# 指定した位置に画像を挿入
my $x = 50;
my $y = 500;
$gfx-&gt;image($image_object, $x, $y);

my $pdf_file = 'image_png.pdf';
$pdf-&gt;saveas($pdf_file);
</pre>
<p>
  <a href="/examples/pdf/image_png.pdf">出力結果 PNG画像の挿入</a>
</p>

<div style="font-weight:bold;font-size:18px;letter-spacing:2px;margin:35px 0 0px 0;padding-left:5px;padding-top:5px;border-top:2px solid #ddd">2019/12/30</div>
<ol class="bread" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemprop="item" href="/">
        <span itemprop="name">Perl</span></a>
    <meta itemprop="position" content="1" />
  </li>
  &#8250;
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemprop="item" href="/blog/20191228171433.html">
      <span itemprop="name">帳票作成</span></a>
    <meta itemprop="position" content="2" />
  </li>
  &#8250;
  <li>
    here
  </li>
</ol>
<h2><a href="/blog/20191230091936.html">テキストを描画する  - PDF::API2で帳票作成</a></h2>
<p>
  PDF::API2で、PDFにテキストを描画するには、次のようにします。
</p>
<pre>
use PDF::API2;

my $pdf = PDF::API2-&gt;new;

my $page = $pdf-&gt;page;

# コアフォントの読み込み
my $font = $pdf-&gt;corefont('Helvetica');

# テキストを表現するコンテンツオブジェクトを取得
my $text = $page-&gt;text();

# フォントを設定
$text-&gt;font($font, 11);

# 描画位置を設定(原点は、左下。デフォルトでは、ページの幅が612単位、高さが792単位)
$text-&gt;translate(30, 750);

# テキストを描画
$text-&gt;text('Hello World!');

my $pdf_file = 'text_core_font.pdf';
$pdf-&gt;saveas($pdf_file);
</pre>
<p>
  <a href="/examples/pdf/text_core_font.pdf">出力結果 テキスト英語</a>
</p>
<p>
  <b>フォントオブジェクトの取得</b>
</p>
<p>
  PDF::API2では、フォントを表現するフォントオブジェクトをcorefontメソッドあるいはttfontメソッドを使って取得します。ここでは、corefontオブジェクトを使って描画しています。
</p>
<pre>
# コアフォントの読み込み
my $font = $pdf-&gt;corefont('Helvetica');
</pre>
<p>
  コアフォントを取得するにはcorefontメソッドを使います。注意点としては、corefontでは、日本語が描画できないことに注意してください。日本語を利用したい場合は、ttfontで日本語をサポートするトゥルータイプフォントを、指定する必要があります。
</p>
<p>
  <b>テキストを表現するコンテンツオブジェクト</b>
</p>
<p>
  PDF::API2では、テキストを表現するコンテンツオブジェクトをページオブジェクトのtextメソッドを使って取得します。ここでは、テキストを表現するコンテンツオブジェクトをテキストオブジェクトと呼びます。これはPDF::API2::Contentオブジェクトです。
</p>
<pre>
# テキストを表現するコンテンツオブジェクトを取得
my $text = $page-&gt;text();
</pre>
<p>
  <b>フォントの設定</b>
</p>
<p>
  PDF::API2では、テキストオブジェクトのfontメソッドで、フォントを設定します。
</p>
<pre>
# フォントを設定
$text-&gt;font($font, 11);
</pre>
<p>
  <b>描画位置の指定</b>
</p>
<p>
  PDF::API2では、テキストオブジェクトのtranslateメソッドで描画位置を設定します。
</p>
<pre>
# 描画位置を設定(原点は、左下。デフォルトでは、ページの幅が612単位、高さが792単位)
$text-&gt;translate(30, 750);
</pre>
<p>
  原点は、左下。デフォルトでは、ページの幅が612単位、高さが792単位です。PDF座標については、<a href="/blog/20191226175520.html">PDFファイルを作成する</a>の「用紙サイズを設定する」の解説を見てください。
</p>
<p>
  注意点としては、ページの余白やテキストの行数などの設定などはできず、描画位置は、translateメソッドで指定する必要があることです。描画位置を自分で計算して指定する必要があることに注意してください。
</p>
<p>
  <b>テキストの描画</b>
</p>
<p>
  PDF::API2では、テキストオブジェクトのtextメソッドでテキストを描画します。
</p>
<pre>
# テキストを描画
$text-&gt;text('Hello World!');
</pre>
<p>
  テキストを描画すると、現在の描画位置のx座標がテキストの終端まで移動します。この位置は、textposメソッドで取得できます。
</p>
<p>
  テキストはフォントのベースライン上に書き出されることに注意してください。
</p>
<h3>フォントの色を設定する</h3>
<p>
  フォントの色を設定するには、strokecolorとfillcolorに色を設定します。フォントの色を直接指定できるメソッドはないので注意してください。
</p>
<pre>
# フォントの色を設定する - 色名
$text-&gt;strokecolor('red');
$text-&gt;fillcolor('red');

# フォントの色を設定する - RGB
$text-&gt;strokecolor('red');
$text-&gt;fillcolor('red');

# フォントの色を設定する - CMYK
$text-&gt;strokecolor('%FF000000');
$text-&gt;fillcolor('%FF000000');
</pre>
<p>
  テキストの描画も、コンテンツの描画の機能を使って、フォントに存在するアウトラインのパスを作成した後に、パスの内部を塗りつぶすことで作成しています。
</p>
<p>
  図形の描画とstrokecolorとfillcolorの詳しい解説は、<a href="/blog/20200101082734.html">基本図形の描画と表の作成</a>を参考にしてください。
</p>
<h3>背景色を設定する</h3>
<p>
  背景色を描画して、その上に、テキストを描画する方法を解説します。実は、これには、落とし穴があるので、注意しましょう。
</p>
<p>
  PDF::API2の動作として、最初に定義されたコンテンツオブジェクトを先に描画するという特性があります。
</p>
<p>
  もし、テキストコンテンツオブジェクトを生成した後に、グラフィックコンテンツオブジェクトを生成したとすれば、テキストは、グラフィックで、消されてしまいます。ですので、必ず、グラフィックコンテンツオブジェクトを先に、テキストコンテンツオブジェクトを後に生成してください。
</p>
<pre>
# グラフィックコンテンツオブジェクトを先に生成
my $gfx = $page-&gt;gfx;

# テキストコンテンツオブジェクトを次にに生成
my $text = $page-&gt;text;

# 間違い(落とし穴、グラフィックでテキストが消える)
my $text = $page-&gt;text;
my $gfx = $page-&gt;gfx;
</pre>
<p>
  もう一つ必要なこととして、フォント色を設定しておく必要があります。これを忘れると、背景色が文字色なって、まるで描画されていないようになります。
</p>
<pre>
my $gfx = $page-&gt;gfx;

# フォント色を忘れずに設定
my $text = $page-&gt;text;
$text-&gt;strokecolor('#000');
$text-&gt;fillcolor('#000');

# 背景を描画
# ...

# テキストを描画
$text-&gt;text('Hello');
&lt;pre&gt;

背景色は、単純にグラフィックコンテンツオブジェクトの機能を使って、書きます。たとえば、四角形を描画して、fillすれば、背景色になります。&lt;a href="/blog/20200101082734.html"&gt;基本図形の描画と表の作成&lt;/a&gt;を参考にしてください。

こうすることで、背景色の上に、テキストを描画することができます。

&lt;h3&gt;アンダーラインを描画&lt;/h3&gt;

PDF::API2でテキストにアンダーラインを描画するにはtextメソッドの「-underline」オプションを指定します。「auto」で自動的にアンダーラインの位置が決まります。

&lt;pre&gt;
# アンダーラインを描画
$text-&gt;text('Hello World!', -underline =&gt; 'auto');
</pre>
<h3>太字にする</h3>
<p>
  コアフォントで、太字を使うには、太字用のフォントを指定します。
</p>
<pre>
# コアフォントの読み込み
my $font = $pdf-&gt;corefont('Helvetica-Bold');
</pre>
<p>
  コンピューターにおける太字というのは、表現方法に二種類あって、太字用のフォントを使うか、アプリケーションで、文字を重ねて描画するかのどちらかです。
</p>
<p>
  注意点として、PDF::API2は、太字にするためのAPIを持っていません。文字を横に拡大するhscaleというメソッドを持っていますが、文字間隔も開いて、太字としては、不自然な見栄えになってしまいます。
</p>
<p>
  代替的な表現として、フォントサイズを1増やすことも検討してみてください。
</p>
<pre>
# 太字の代替表現として、フォントサイズを1増やす
$text-&gt;font($font, $font_size + 1);
</pre>
<h3>文字間隔を設定</h3>
<p>
  文字間隔を設定するにはcharspaceメソッドを使用します。デフォルトは0です。
</p>
<pre>
# 文字間隔を設定
$text-&gt;charspace(1);
</pre>
<h3>テキストを指定位置を中心として描画</h3>
<p>
  PDF::API2でテキストを指定位置を中心として描画するには、text_centerメソッドを使用します。オプションは、textメソッドと同一です。
</p>
<pre>
# アンダーラインを描画
$text-&gt;text_center('Hello World!');
</pre>
<p>
  ページの見出しなどを画面の中央に表示したい場合などに利用できます。
</p>
<h3>テキストを指定位置を右端として描画</h3>
<p>
  PDF::API2でテキストを指定位置を右端として描画として描画するには、text_rightメソッドを使用します。オプションは、textメソッドと同一です。
</p>
<p>
  ページ番号などの、右下に表示したい場合などに利用できます。
</p>
<pre>
# アンダーラインを描画
$text-&gt;text_right('Hello World!');
</pre>
<h3>現在のテキストの描画位置を取得する</h3>
<p>
  PDF::API2で現在のテキストの描画位置を取得するには、textposメソッドを使用します。
</p>
<pre>
# 現在のテキストの描画位置を取得
my ($x, $y) = $text-&gt;textpos();
</pre>
<p>
  この値を使って、改行すべき位置をチェックしたり、改ページすべき位置をチェックすることができます。
</p>
<h3>フォントサイズを取得する</h3>
<p>
  PDF::API2で、既存のテキストのフォントサイズを取得するには、textstateメソッドを引数なしで呼び出し、テキストの状態を表現するハッシュが返されるので、fontsizeの値を取り出します。
</p>
<pre>
# 既存のテキストのフォントサイズを取得
my %text_state = $text-&gt;textstate;
my $font_size = $text_state{fontsize};
</pre>
<h3>テキストの高さを取得する</h3>
<p>
  テキストの高さは、実は、フォントサイズと同じです。フォントサイズ16は、PDF単位の16と同じです。改行をする場合は、フォントサイズで改行すれば、重なることがありません。
</p>
<pre>
my $font_size = 16;
my $text_height = $font_size;
</pre>
<h3>行の高さ</h3>
<p>
  行と行の間は行間が少し空いていますね。行の高さは、テキストの高さに、行間の幅を加えたものになります。フォントサイズ(テキストの高さ)が11で、行間が2だとすると、行の高さは、13となります。
</p>
<pre>
# フォントサイズ(テキストの高さ)
my $font_size = 16;
my $text_height = $font_size;

# 行間
my $line_margin = 2;

# 行の高さ
my $line_height = $text_height + $line_margin;
</pre>
<p>
  例えば、改行をして、移動するときは、行の高さを減算してあげればよいです。
</p>
<h3>描画するテキストの幅を取得</h3>
<p>
  描画するテキストの幅をあらかじめ取得するにはadvancewidthメソッドを使用します。
</p>
<pre>
my $text_width = $text-&gt;advancewidth($string);
</pre>
<p>
  右側にはみ出した場合に改行という処理を行う場合に、利用できます。
</p>
<h3>余白の設定</h3>
<p>
  PDF::API2を使う場合は、ページに余白を設定したい場合は、GUIでの画面のように、余白の値を設定することはできません。自分で計算する必要があります。
</p>
<p>
  ただしデメリットばかりではなく、この方法を覚えておくと、奇数ページと偶数ページで、余白を変えたりと、非常に柔軟性があります。
</p>
<h4>PDF単位とインチとmmの関係</h4>
<p>
  まず最初にPDFで指定されるPDF単位とインチとmmの関係を覚えましょう。
</p>
<p>
  PDFの1単位は、1/72インチです。
</p>
<p>
  1インチは、25.4mmです。
</p>
<p>
  PDFの1単位は、mmに換算すると約0.352777777777778mmです。割り切れません。
</p>
<p>
  PDFの3単位は、mmに換算すると約1.05833333333333mmです。割り切れません。
</p>
<p>
  PDFの9単位は、mmに換算すると、3.175mmです。
</p>
<p>
  PDFの3単位が1mmに近いですね。9単位がきりが良いです。
</p>
<p>
  余白をだいたい12mm～13mmにしたいとすれば、PDF単位の36を使います。考え方としては、PDFの9単位は、mmに換算すると、3.175mmですから、これに4をかけると、36単位で、12.7mmとなります。
</p>
<p>
  ここでの解説は、上下左右のすべての余白が36単位であるとします。
</p>
<pre>
# ページ上余白
my $page_top_margin = 36;

# ページ下余白
my $page_bottom_margin = 36;

# ページ左余白
my $page_left_margin = 36;

# ページ右余白
my $page_right_margin = 36;
</pre>
<p>
  上下余白については、フォントのベースラインが基準になりますので、見た目よりも、すこし文字がはみ出ることに注意してください。
</p>
<h4>描画開始位置と描画終了位置</h4>
<p>
  余白を考える場合は、描画の開始位置のXY座標と、描画終了位置のXY座標を計算で求める必要があります。
</p>
<p>
  まず、用紙サイズの幅を取得しましょう。(参考:<a href="/blog/20191226175520.html">PDFファイルを作成する</a>の用紙サイズを取得する)
</p>
<pre>
# 用紙サイズの幅と高さを取得
my @page_size_infos = $page-&gt;mediabox;
my $page_width = $page_size_infos[2];
my $page_height = $page_size_infos[3];
</pre>
<p>
  PDFの座標は、左下から始まるということを、意識しておきましょう。これが、典型的なPDFドキュメントとすると、ページの幅が、612単位、高さが792単位ですので、ページの左上の座標は(0, 791)です。(0, 0)ではないので注意してください。
</p>
<p>
  x座標は、そのまま計算できますが、y座標は、ページの高さから減算して求める必要があります。
</p>
<p>
  描画開始位置のxy座標と、描画終了位置のxy座標を計算して求めると次のようになります。
</p>
<pre>
# 描画開始x座標
my $render_start_x = 0;

# 描画開始y座標
my $render_start_y = $page_height - 1;

# 描画終了x座標
my $render_end_x = $page_width - 1;

# 描画終了y座標 = 0;
my $render_end_y = 0;
</pre>
<p>
  これに余白を追加すると以下のようになります。
</p>
<pre>
# 描画開始x座標
my $render_start_x = $page_left_margin;

# 描画開始y座標
my $render_start_y = $page_height - 1 - $page_top_margin;

# 描画終了x座標
my $render_end_x = $page_width - 1 - $page_right_margin;

# 描画終了y座標
my $render_end_y = $page_bottom_margin;
</pre>
<h4>余白、改行、改ページに対応したテキストの描画</h4>
<p>
  では、ここで余白、改行、改ページを意識して、テキストを、描画してみましょう。右端に到達すると改行します。英語のみです。英単語は、1文字づつの単位で改行されます。下に到達すると改ページします。
</p>
<pre>
use strict;
use warnings;
use utf8;

use PDF::API2;

my $pdf = PDF::API2-&gt;new;

# コアフォントの読み込み
my $font = $pdf-&gt;corefont('Helvetica-Bold');
my $font_size = 11;

# テキストの高さ
my $text_height = $font_size;

# 行間
my $line_margin = 2;

# 行の高さ
my $line_height = $text_height + $line_margin;

# 用紙サイズのデフォルトのグローバル設定(用紙サイズを取得するため)
$pdf-&gt;mediabox(undef);

# ページの高さと幅
my @page_size_infos = $pdf-&gt;mediabox;
my $page_width = $page_size_infos[2];
my $page_height = $page_size_infos[3];

# ページ余白
my $page_top_margin = 36;
my $page_bottom_margin = 36;
my $page_left_margin = 36;
my $page_right_margin = 36;

# 描画開始x座標
my $render_start_x = $page_left_margin;

# 描画開始y座標
my $render_start_y = $page_height - 1 - $page_top_margin;

# 描画終了x座標
my $render_end_x = $page_width - 1 - $page_right_margin;

# 描画終了y座標
my $render_end_y = $page_bottom_margin;

# メッセージ(1000回の同じメッセージ繰り返し)
my $message = 'Hello World!' x 1000;

# 改行戻りx座標を保存
my $new_line_left_x = $render_start_x;

# 現在描画位置
my $cur_render_x = $render_start_x;
my $cur_render_y = $render_start_y;

# ページの作成
my $page = $pdf-&gt;page;

# テキストを表現するコンテンツオブジェクトを取得
my $text = $page-&gt;text();

# フォント設定
$text-&gt;font($font, $font_size);

# 描画開始位置に移動
$text-&gt;translate($render_start_x, $render_start_y);

# 1文字づつ取り出し
while ($message =~ /(.)/g) {
  my $char = $1;
  
  # 現在描画位置が、描画終了x座標を超えていれば改行
  if ($cur_render_x &gt; $render_end_x) {
    $cur_render_x = $new_line_left_x;
    $cur_render_y -= $line_height;
    
    # 描画開始位置に移動
    $text-&gt;translate($cur_render_x, $cur_render_y);
  }

  # 現在描画位置が、描画終了y座標を超えていれば改ページ
  if ($cur_render_y &lt; $render_end_y) {
    $cur_render_x = $render_start_x;
    $cur_render_y = $render_start_y;
    
    # ページの作成
    $page = $pdf-&gt;page;

    # テキストを表現するコンテンツオブジェクトを取得
    $text = $page-&gt;text();

    # フォント設定
    $text-&gt;font($font, $font_size);

    # 描画開始位置に移動
    $text-&gt;translate($cur_render_x, $cur_render_y);
  }
  
  # 文字を描画
  $text-&gt;text($char);
  
  # 描画位置を更新
  ($cur_render_x) = $text-&gt;textpos;
}

my $pdf_file = 'margin_full_text.pdf';
$pdf-&gt;saveas($pdf_file);
</pre>
<p>
  「Hello World!」が繰り返される、余白つきページが、3ページ出力されます。
</p>
<p>
  僕の環境では、1万2000文字で1～2秒かかっています。PDF出力は、意外に重い処理です。
</p>
<p>
  <a href="/examples/pdf/margin_full_text.pdf">出力結果 余白、改行、改ページ</a>
</p>
<h4>HTMLの見出しやpタグを表現するには?</h4>
<p>
  ここでは、詳しく解説しませんが、ヒントだけ書いておきます。少なくとも、タグを解析する必要があります。正規表現や、HTMLを解析してくれるモジュールが利用できるでしょう。後で、リストやテーブルに対応することを考えると、HTMLを解析してくれるモジュールを使うのが、汎用的でしょうか。
</p>
<pre>
&lt;h1&gt;タイトル&lt;/h1&gt;

&lt;p&gt;
メッセージ
&lt;/p&gt;
</pre>
<p>
  XML::Simpleの利用が、簡単そうです。固定書式であれば、難しいことを考えることがないので、XML::Simpleで、Perlの多次元データ構造にできれば、よさそうな感じはします。
</p>
<p>
  本を作るときのような、固定書式で出力するのであれば、CSSの解析はいらなさそうです。見出しやpタグごとの、マージンの設定をプログラム上で行う必要がありそうですね。
</p>
<h4>英単語の単位で改行するには?</h4>
<p>
  英単語を改行の途中で切りたくないというのは、よくありそうですね。この場合は、少し難しいですが、次のように考えましょう。
</p>
<p>
  まず、英文字が始まるx座標を覚えておきます。また、英文字が始まった場合に、これを、$tmp_wordのような文字列に保存しておきましょう。テキスト出力はまだ待って、次のループに移動しましょう。英文字以外が来た場合に、その直前までが、一つの英単語です。もし、$tmp_wordの幅が、右端を超えていたら、改行して出力、超えていなかったら、そのまま出力です。
</p>
<h3>日本語を描画するためのフォント</h3>
<p>
  PDF::API2で日本語を描画するためには、日本語に対応したフォントが必要になります。コアフォントは、英語だけです。
</p>
<p>
  フォントの中でも、TrueType Font(トゥルータイプフォント)と呼ばれるフォントを使う必要があります。
</p>
<p>
  フォントは、一つのファイルとして提供されていて、TrueType Fontの拡張子は、ttfです。
</p>
<h4>TrueType Fontの取得</h4>
<p>
  無料で利用できるTrueTypeフォントがあるので、それを取得しましょう。検索するとたくさんでてきます。
</p>
<p>
  選択の注意点としては、オープンフォントではなく、トゥルータイプフォントを選ぶことと、PDFに埋め込み可能なフォントを選ぶことです。
</p>
<p>
  トゥルータイプフォントファイルは、ポータブルなので、機種依存文字を使わない限りは、WindowsでもMacでもLinuxでも同じように扱えます。OSへのフォントのインストール方法に違いがありますが、ファイルを直接読み込む場合は、関係ありません。(参考:<a href="https://fontnavi.jp/zakkuri/105-font_for_mac_win.aspx">Windows用フォントとMac用フォントは違うのか</a>)
</p>
<p>
  ここでは、日本語を描画できるTrueTypeフォントの中で、kochi-gothic-subst.ttfというものを一つ紹介しておきます。
</p>
<ul>
  <li><a href="https://github.com/indico/indico-fonts/raw/master/indico_fonts/kochi-gothic-subst.ttf">kochi-gothic-subst.ttf</a>(<a href="https://github.com/indico/indico-fonts/tree/master/indico_fonts">フォント一覧ページ</a>)
</ul>
<p>
  ダウンロードして、好きな場所に配置してください。
</p>
<h4>TrueType Fontの読み込み</h4>
<p>
  TrueType Fontは、ttfontメソッドで読み込むことができます。取得したTrueType Fontのパスを指定します。
</p>
<pre>
my $true_type_font_file = '/path/kochi-gothic-subst.ttf';
my $font = $pdf-&gt;ttfont($true_type_font_file);
</pre>
<p>
  corefontでコアフォントを読み込んでいる場所を、上記に書き換えると、日本語を出力できます。
</p>
<p>
  Perlの日本語を扱う場合のお約束として、ファイルはUTF-8で保存して、use utf8を行ってください。
</p>
<pre>
use utf8;
</pre>
<p>
  PDF::API2においては、フォントは、PDFファイルに埋め込まれ、PDFファイルは、フォントファイルを参照しません。
</p>
<p>
  プログラムのおいたディレクトリにフォントファイルを置いて、読み込む場合は、FindBinモジュールを使って、次のようにするのが簡単です。
</p>
<pre>
use FindBin;

my $true_type_font_file = "$FindBin::Bin/kochi-gothic-subst.ttf";
</pre>
<h4>日本語対応のTrueTypeフォントで太字にしたい</h4>
<p>
  日本語対応のTrueType Fontで太字にしたい場合は、ノーマルフォントとは別に、太字のフォントも用意されているフォントを利用しましょう。
</p>
<p>
  日本語、TrueTypeフォント、太字あり、商用利用可能なものを、調べたので紹介します。
</p>
<p>
  <b>あおぞら明朝フォント</b>
</p>
<ul>
  <a href="http://blueskis.wktk.so/AozoraMincho/">あおぞら明朝フォント</a>(<a href="http://ayapin-film.sakura.ne.jp/Jttf/jttf.html">日本語TTFフリーフォント for X11</a>)
</ul>
<p>
  ダウンロードは以下から。
</p>
<p>
  <a href="http://blueskis.wktk.so/AozoraMincho/archive/v0.1/aozoramincho-readme-ttf.zip">あおぞら明朝フォントのダウンロード</a>
</p>
<p>
  aozoramincho-readme-ttf.zipを解凍すると、以下のフォントファイルがあります。
</p>
<pre>
AozoraMincho-bold.ttf 太字
AozoraMincho-thin.ttf
AozoraMinchoBlack.ttf
AozoraMinchoHeavy.ttf
AozoraMinchoLight.ttf
AozoraMinchoMedium.ttf
AozoraMinchoRegular.ttf 通常
</pre>
<p>
  これらのファイルを使うと、通常と太字に対応できます。
</p>
<pre>
# 通常
my $true_type_font_file = '/path/AozoraMinchoRegular.ttf';
my $font = $pdf-&gt;ttfont($true_type_font_file);

# 太字
my $true_type_font_bold_file = '/path/AozoraMincho-bold.ttf';
my $font_bold = $pdf-&gt;ttfont($true_type_font_file);
</pre>
<p>
  日本語フォントにおいては、テキストのベースラインは、文字の下端に存在することがほとんどだと想定しますが、あおぞら明朝フォントもベースラインは、文字の下端に存在します。つまり、translateで移動した点に対して、右上にはみ出るように、文字が描画されるということです。
</p>
<p>
  この場合は、余白の上の設定は、文字が上側にはみ出るために、その分を考慮する必要があることに注意してください。
</p>
<h3>余白、改行、改ページ、日本語、太字に対応したサンプル</h3>
<p>
  余白、改行、改ページ、日本語、太字に対応したサンプルです。「こんにちは、世界。」と繰り返し表示され、世界の場合だけ太字になります。
</p>
<pre>
use strict;
use warnings;
use utf8;
use FindBin;

use PDF::API2;

my $pdf = PDF::API2-&gt;new;

# 日本語に対応したTrueTypeフォントの読み込み
my $true_type_font_file = "$FindBin::Bin/AozoraMinchoRegular.ttf";
my $font = $pdf-&gt;ttfont($true_type_font_file);
my $true_type_font_bold_file = "$FindBin::Bin/AozoraMincho-bold.ttf";
my $font_bold = $pdf-&gt;ttfont($true_type_font_bold_file);

my $font_size = 11;

# テキストの高さ
my $text_height = $font_size;

# 行間
my $line_margin = 2;

# 行の高さ
my $line_height = $text_height + $line_margin;

# 用紙サイズのデフォルトのグローバル設定(用紙サイズを取得するため)
$pdf-&gt;mediabox(undef);

# ページの高さと幅
my @page_size_infos = $pdf-&gt;mediabox;
my $page_width = $page_size_infos[2];
my $page_height = $page_size_infos[3];

# ページ余白
my $page_top_margin = 36;
my $page_bottom_margin = 36;
my $page_left_margin = 36;
my $page_right_margin = 36;

# 描画開始x座標
my $render_start_x = $page_left_margin;

# 描画開始y座標
my $render_start_y = $page_height - 1 - $page_top_margin;

# 描画終了x座標
my $render_end_x = $page_width - 1 - $page_right_margin;

# 描画終了y座標
my $render_end_y = $page_bottom_margin;

# メッセージ(1000回の同じメッセージ繰り返し)
my $message = 'こんにちは、世界。' x 1000;

# 改行戻りx座標を保存
my $new_line_left_x = $render_start_x;

# 現在描画位置
my $cur_render_x = $render_start_x;
my $cur_render_y = $render_start_y;

# ページの作成
my $page = $pdf-&gt;page;

# テキストを表現するコンテンツオブジェクトを取得
my $text = $page-&gt;text();

# フォント設定
$text-&gt;font($font, $font_size);

# 描画開始位置に移動
$text-&gt;translate($render_start_x, $render_start_y);
  
# 1文字づつ取り出し
while ($message =~ /(.)/g) {
  my $char = $1;
  
  # 現在描画位置が、描画終了x座標を超えていれば改行
  if ($cur_render_x &gt; $render_end_x) {
    $cur_render_x = $new_line_left_x;
    $cur_render_y -= $line_height;
    
    # 描画開始位置に移動
    $text-&gt;translate($cur_render_x, $cur_render_y);
  }

  # 現在描画位置が、描画終了y座標を超えていれば改ページ
  if ($cur_render_y &lt; $render_end_y) {
    $cur_render_x = $render_start_x;
    $cur_render_y = $render_start_y;
    
    # ページの作成
    $page = $pdf-&gt;page;

    # テキストを表現するコンテンツオブジェクトを取得
    $text = $page-&gt;text();

    # フォント設定
    $text-&gt;font($font, $font_size);

    # 描画開始位置に移動
    $text-&gt;translate($cur_render_x, $cur_render_y);
  }
  
  # 世界を太字
  if ($char eq '世' || $char eq '界') {
    $text-&gt;font($font_bold, $font_size);
  }
  else {
    $text-&gt;font($font, $font_size);
  }

  # 文字を描画
  $text-&gt;text($char);
  
  # 描画位置を更新
  ($cur_render_x) = $text-&gt;textpos;
}

my $pdf_file = 'margin_full_text_jp.pdf';
$pdf-&gt;saveas($pdf_file);
</pre>
<p>
  <a href="/examples/pdf/margin_full_text_jp.pdf">出力結果 日本語、太字対応</a> 
</p>


  </div>
  <div class="bottom">
    <!-- bottom -->
<!--
<hr>
<div style="width:90%;max-width:400px;background:#ffcef6;border: 1px solid #ff59e6;border-radius:3px;margin:10px auto;font-size:20px;">
<a rel="nofollow" href="https://perl-entrance-osaka.connpass.com/event/125719/"><img src="https://connpass-tokyo.s3.amazonaws.com/thumbs/c7/d9/c7d929370c08bcb1d0b37cc33f9b6b79.png" width="80px">Perl入学式大阪 大阪府大阪市北区芝田 2019年5月25日(土) 第一回 春季開校<br>Perlプログラミングを0から学ぼう。<br>テキスト処理,正規表現,if,for,変数</a>
</div>
-->

<div class="perlzemi-forum">
  <a rel="nofollow" href="https://docs.google.com/forms/d/e/1FAIpQLSe6ypMTx5XTh2KbsIgqgPMXNrC5Bo9FKRPVHM_o0jvrH_k28A/viewform">
    Perlゼミフォーラム - Perlプログラムの読み書きに困ったらここで質問(無料・5分で登録)
  </a>
</div>

  </div>
</div>

        </div>
        <div class="side">
          <div class="hatena-module">
  <div class="hatena-moduletitle">
    Perl入門
  </div>
  <div class="hatena-modulebody">
    <ul>
      <li>
        <a rel="nofollow" href="/list.html">新着情報</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20180820153471.html">Perlのインストール</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20091226126425.html">基礎文法最速マスター</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20161012147627.html">配列</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20161013147635.html">ハッシュ</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20161023147731.html">条件分岐</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20170521149524.html">繰り返し処理</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20161003147558.html">文字列</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20100827127859.html">正規表現</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20100930127859.html">リファレンスと多次元データ構造</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20101130129876.html">サブルーチン</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20110212130370.html">ファイル入出力</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20161107147852.html">変数</a>
      </li>
    </ul>
  </div>
</div>
<div class="hatena-module">
  <div class="hatena-moduletitle">
    Perl辞典
  </div>
  <div class="hatena-modulebody">
    <ul>
      <li>
        <a rel="nofollow" href="/blog/20161004147558.html">標準関数</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20161022147731.html">構文・文法</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20161005147566.html">演算子</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20091116124667.html">モジュール</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20161102147817.html">特殊変数</a>
      </li>
    </ul>
  </div>
</div>
<div class="hatena-module">
  <div class="hatena-moduletitle">
    Perl中級編
  </div>
  <div class="hatena-modulebody">
    <ul>
      <li>
        <a rel="nofollow" href="/blog/20100411127089.html">例外処理</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20080108132865.html">コマンドライン引数</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20100302126967.html">デバッガ</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20161126148016.html">ファイル・ディレクトリ操作</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20091120124667.html">現代的な記述方法</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20130305136248.html">オブジェクト指向</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20110128130016.html">スコープ</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20091105124627.html">日付と時刻</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20161026147748.html">数値計算</a>
      </li>
    </ul>
  </div>
</div>
<div class="hatena-module">
  <div class="hatena-moduletitle">
    Web開発
  </div>
  <div class="hatena-modulebody">
    <ul>
      <li>
        <a rel="nofollow" href="/blog/20140319139520.html">Mojolicious入門</a>
      </li>
    </ul>
  </div>
</div>
<div class="hatena-module">
  <div class="hatena-moduletitle">
    Perl発展編
  </div>
  <div class="hatena-modulebody">
    <ul>
      <li>
        <a rel="nofollow" href="/blog/20080229120427.html">Perl発展編</a>
      </li>
    </ul>
  </div>
</div>
<div class="hatena-module">
  <div class="hatena-moduletitle">
    サイト情報
  </div>
  <div class="hatena-modulebody">
    <ul>
      <li>
        <a rel="nofollow" href="/blog/20170917151092.html">サイト情報</a>
      </li>
    </ul>
  </div>
</div>
<div class="hatena-module">
  <div class="hatena-moduletitle">
    Perlの書籍
  </div>
  <div class="hatena-modulebody">
    <ul>
      <li>
        <a rel="nofollow" href="/blog/20120326133275.html"><img src="https://images-fe.ssl-images-amazon.com/images/I/51d4T7m8NzL._SL160_.jpg"></a><br>
        <span style="color:green">ログ解析など日本語を含むテキスト処理の実践ならこれ!Perlゼミ執筆のお勧め書籍</span>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20120326133275.html">業務に役立つPerl</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20180724153238.html">雅なPerl入門</a>
      </li>
    </ul>
  </div>
</div>
<div class="hatena-module">
  <div class="hatena-moduletitle">
    姉妹サイト
  </div>
  <div class="hatena-modulebody">
    <ul>
      <li>
        <a href="https://linux.perlzemi.com/">Linuxサーバー管理入門</a>
      </li>
      <li>
        <a href="https://web.perlzemi.com/">Mojoliciousスタートアップ - 新規Web開発</a>
      </li>
      <li>
        <a rel="nofollow" href="https://twitter.com/perlzemi">Perlゼミ Twitter</a>
      </li>
      <li>
        <a rel="nofollow" href="https://perlzemichannel.seesaa.net/">Perlゼミの「爆速」プログラミングちゃんねる</a>
      </li>
      <li>
        <a rel="nofollow" href="http://www.perlzemi.com">Perlゼミのプログラミングスクール</a>
      </li>
      <li>
        <a rel="nofollow" href="https://philosophy.perlzemi.com/">Perlの哲学 - Perlに対する誤解を解きたい</a>
      </li>
      <li>
        <a rel="nofollow" href="https://yuki-kimoto.github.io">Perlゼミのオープンソースプロジェクト</a>
      </li>
      <li>
        <div class="giblog-banner">
          <div>
            <a href="https://jp.giblog.net"><img src="/images/giblog-banner.png" alt="Giblog"></a>
          </div>
        </div>
        <a rel="nofollow" href="https://jp.giblog.net/">Giblog - Gitで管理できるサイト・ブログを作成するためのツール。Github PagesでWebサイトを無料で公開</a>
      </li>
    </ul>
  </div>
</div>
<div class="hatena-module">
  <div class="hatena-moduletitle">
    Perl勉強会・イベント
  </div>
  <div class="hatena-modulebody">
    <ul>
      <li>
        <a href="https://blog.yapcjapan.org/">YAPC::Japan 運営ブログ</a>
      </li>
      <li>
        <a rel="nofollow" href="http://www.perl-entrance.org/">Perl入学式</a>
      </li>
      <li>
        <a rel="nofollow" href="https://kichijojipm.hatenablog.com/">吉祥寺.pm</a>
      </li>
    </ul>
  </div>
</div>
<div class="hatena-module">
  <div class="hatena-moduletitle">
    お問合せ
  </div>
  <div class="hatena-modulebody">
    <a rel="nofollow" href="/mail.html">お問合せはこちら</a>
  </div>
</div>

        </div>
      </div>
      <div class="footer">
        <style>
.what-is-perl {
  width:95%;
  margin: 20px auto;
}
.what-is-perl b {
  padding-left:3px;
  padding-right:3px;
  font-size:103%;
}
.what-is-perl ul {
}
.what-is-perl li {
  list-style:none;
}
.what-is-perl img {
  width:100%;
  max-width:110px;
}

</style>

<div class="what-is-perl">
  <div>
    <img src="/images/perl-onion-logo.png">
  </div>
  <ul>
    <li><b>Perl</b>は、<b>テキスト処理</b>の記述性とパフォーマンスに優れ、<b>正規表現</b>が言語に組み込まれているプログラミング言語です。</li>
    <li><a href="https://linux.perlzemi.com" style="color:#666"><b>Linuxサーバー管理</b></a>での<b>フィルタリングプログラム</b>、複数行の文字列を処理、ファイル内容の検索・置換などが得意。<a href="https://web.perlzemi.com/" style="color:#666"><b>Mojoliciousを使ったWebスタートアップ</b></a>も。</li>
    <li>Perlは、<b>git</b>や<b>openssl</b>など<b>Unix/Linuxミドルウェア</b>の支援ツールとして採用されています。</li>
  </ul>
</div>

<!-- footer -->
<a rel="nofollow" href="http://www.perlzemi.com">Perlゼミのプログラミングスクールはこちら</a> & <a rel="nofollow" href="https://jp.giblog.net/">このサイトはGiblogで製作されています</a>

      </div>
    </div>
  </body>
</html>
