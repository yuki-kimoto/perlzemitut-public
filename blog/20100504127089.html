<!DOCTYPE html>
<html>
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-37528940-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-37528940-3');
</script>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">
<meta name="google-site-verification" content="4cR7WuQWEtkbu8ThfxGkT1vACiVi5Q_8ykfkRudOnTU" />

<link rel="shortcut icon" href="/images/favicon.png">

<link rel="stylesheet" type="text/css" href="/css/common.css">
<script type="text/javascript" src="/js/jquery-1.9.0.min.js"></script>
<script type="text/javascript" src="/js/google-code-prettify/prettify.js"></script>
<link  type="text/css" rel="stylesheet" href="/js/google-code-prettify/prettify.css"/>
<script>
  $(function(){
    // google code prettifyの有効化
    $("pre").addClass("prettyprint");
    function init(event){
      prettyPrint();
    }
    if(window.addEventListener)window.addEventListener("load",init,false);
    else if(window.attachEvent)window.attachEvent("onload",init);
    
    $(".to-top").click(function() {
      // ページの一番上までスクロールさせます。
      $('body, html').animate({scrollTop: 0}, 300, 'linear');;
    });
  });
</script>

<title>CPAN - CPANからモジュールインストール - Perlゼミ</title>
<meta name="description" content="CPANモジュールを使用すればCPANからモジュールインストールすることができます。CPANは無料で利用できるモジュールがたくさん集められたサイトです。CPANモジュールはコマンドラインから利用することが想定されており、cpanコマンドから各種機能を利用することができます。">
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@perlzemi" />
<meta name="twitter:title" content="CPAN - CPANからモジュールインストール - Perlゼミ" />
<meta name="twitter:description" content="CPANモジュールを使用すればCPANからモジュールインストールすることができます。CPANは無料で利用できるモジュールがたくさん集められたサイトです。CPANモジュールはコマンドラインから利用することが想定されており、cpanコマンドから各種機能を利用することができます。" />
<meta name="twitter:image" content="https://tutorial.perlzemi.com/images/perlzemi-twitter-card.png" />


  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>
  <a href="/"><img src="/images/logo.png"><span style="font-size:105%">Perl</span>ゼミ</a>
</h1>
<div class="header-description">
  Perlでテキスト処理、Linuxサーバー管理、Webシステム開発
</div>

      </div>
      <div class="main">
        <div class="content">
          <div class="entry">
  <div class="top">
    <!-- entry-top -->
<style>
  .perlzemi_channel {
  }
  .perlzemi_channel a {
    background:url(/images/perlzemi-channel-image.jpg) no-repeat;
    display:block;
    width:100%;
    height:100%;
    padding-left:130px;
    text-decoration:none;
    min-height:130px;
    padding-top:20px;
  }
  .perlzemi_channel a:hover {
    background-color:#ffebfe;
  }
</style>
<div class="perlzemi_channel">
  <a rel="nofollow" href="https://www.youtube.com/channel/UCbeAS6ZXpSKqkzb-Nykb0ZQ">
    <div>
      「初心者が動画で学べるPerlプログラミングちゃんねる始めました」
    </div>
    <div>
      「プログラミングを今から始めたい、始めたばかりという方へお勧め」
    </div>
    <div>
      「チャンネル登録でエンジニア界の裏話が聞けるコンテンツ準備中」
    </div>
    <div >
      <span style="color:black;font-weight:bold;">パールの「きもとん」と一緒に楽しく学ぼう。口コミ歓迎</span>
    </div>
  </a>
</div>

  </div>
  <div class="middle">
    <ol class="bread" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemprop="item" href="/">
        <span itemprop="name">Perl</span></a>
    <meta itemprop="position" content="1" />
  </li>
  &#8250;
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemprop="item" href="/blog/20091116124667.html">
      <span itemprop="name">モジュール</span></a>
    <meta itemprop="position" content="2" />
  </li>
  &#8250;
  <li>
    here
  </li>
</ol>
<h2><a href="/blog/20100504127089.html">CPAN - CPANからモジュールインストール</a></h2>
<p>
  <strong>CPAN</strong>モジュールを使用すれば<a href="http://search.cpan.org/">CPAN</a>からモジュールインストールすることができます。CPANは無料で利用できるモジュールがたくさん集められたサイトです。CPANモジュールはコマンドラインから利用することが想定されており、cpanコマンドから各種機能を利用することができます。
</p>
<p>
  コマンドラインでcpanコマンドを実行するとモジュールをインストールすることができます。
</p>
<pre>
# モジュールのインストール
cpan モジュール名
</pre>
<p>
  またcpanシェルと呼ばれる対話的にインストールを行う機能もあります。cpanコマンドに引数を指定しなければcpanシェルが起動します。(ActivePerlでYAMLエラーがでる場合がありますが対処ほうは<a href="/blog/20110520130853.html">こちら</a>にあります。)
</p>
<pre>
# cpanシェルの起動
cpan

# モジュールのインストール(cpanシェル)
install モジュール名
</pre>
<p>
  cpanシェルを終了するにはexitコマンドを使用します。
</p>
<pre>
# cpanシェルの終了(cpanシェル)
exit
</pre>
<p>
  もしcpanを実行するのが始めてであれば、初回起動時にcpanの設定を行う必要があります。たくさんの設定について聞かれるので驚いてしまうかもしれませんが、Enterを押してデフォルトの設定を進めていきましょう。後で設定を変更することもできます。
</p>
<p>
  最近のcpanはすべてを自動で設定してくれるようになっていますが、少し古いものであれば、一部手動で設定しなければならない項目があります。
</p>
<p>
  どのミラーサイトからインストールするかを決める項目です。CPANには世界中にミラーサイトがあるので一番近いミラーサイトを選択しましょう。
</p>
<pre>
# CPANミラーの選択

First, pick a nearby continent and country (you can pick several of
each, separated by spaces, or none if you just want to keep your
existing selections). Then, you will be presented with a list of URLs
of CPAN mirrors in the countries you selected, along with previously
selected URLs. Select some of those URLs, or just keep the old list.
Finally, you will be prompted for any extra URLs -- file:, ftp:, or
http: -- that host a CPAN mirror.

(1) Africa
(2) Asia                     &lt;---------これを選択
(3) Australasia
(4) Central America
(5) Europe
(6) North America
(7) South America
Select your continent (or several nearby continents) [] 2

(1) China
(2) Hong Kong
(3) Indonesia
(4) Israel
(5) Japan                   &lt;----------これを選択
(6) Saudi-Arabia
(7) Singapore
(8) South Korea
(9) Taiwan
(10) Thailand
Select your country (or several nearby countries) [] 5

(1) ftp://ftp.dti.ad.jp/pub/lang/CPAN/
(2) ftp://ftp.jaist.ac.jp/pub/lang/perl/CPAN/
(3) ftp://ftp.lab.kdd.co.jp/lang/perl/CPAN/
(4) ftp://ftp.meisei-u.ac.jp/pub/CPAN/
(5) ftp://ftp.ring.gr.jp/pub/lang/perl/CPAN/   &lt;----- どれでもよいが今回は5を選択
(6) ftp://mirror.nucba.ac.jp/mirror/Perl/

Select as many URLs as you like [] 5
</pre>
<p>
  cpanの設定をやり直したい場合はcpanシェルで「o conf init」コマンドを使用します。
</p>
<pre>
# 設定をやり直す(cpanシェル)
o conf init
</pre>
<h3>capnの設定の変更</h3>
<p>
  cpanの設定を変更するにはcpanシェルを起動してから「o conf」コマンドを使用します。すべての設定値を見るには「o conf」とします。
</p>
<pre>
# すべての設定を見る(cpanシェル)
o conf
</pre>
<p>
  次のように設定の一覧が表示されます。
</p>
<pre>
# cpanの設定の一覧
    applypatch         []
    auto_commit        [0]
    build_cache        [100]
    build_dir          [/root/.cpan/build]
    .
    . (省略)
    .
    username           undef
    wait_list          undef
    wget               [/usr/bin/wget]
    yaml_load_code     [0]
    yaml_module        [YAML]    
</pre>
<p>
  設定項目は変更することができます。
</p>
<pre>
# 設定の変更(cpanシェル)
o conf build_cache 200
</pre>
<p>
  設定した項目はcpanシェルが起動している間だけ有効です。設定を保存するためにはcommitを実行する必要があります。
</p>
<pre>
# 設定の保存(cpanシェル)
o conf commit
</pre>
<p>
  設定項目がリストの場合はunshift,push,pop,shiftコマンドを利用することもできます。
</p>
<pre>
# 先頭に追加
o conf urllist unshift http://cpan.dev.local/CPAN

# 末尾に追加
o conf urllist push http://cpan.dev.local/CPAN

# 末尾を削除
o conf urllist pop

# 先頭を削除
o conf urllist shift
</pre>
<h3>CPANモジュールのインストールに失敗する場合</h3>
<p>
  CPANモジュールのインストールが失敗することはよくあります。これこれの原因を特定することは難しいですが考えられる状況をいくつか書いておきます。
</p>
<p>
  1. CPANミラーが落ちている
</p>
<p>
  -> urllistの先頭に利用できるCPANミラーを追加する
</p>
<p>
  2. モジュールが巨大なのでモジュールをビルドするために確保しておく領域が足りない
</p>
<p>
  -> build_cache の値を100Mくらいに増やしてみる
</p>
<p>
  3. モジュールがUnix環境しか想定していない。あるいは、Windowsで失敗する試験を含めている。
</p>
<p>
  -> 試験が失敗していることだけが原因であると思うならば、強制的にインストールしてみることもできるが、報告してあげるのが望ましい。
</p>
<p>
  4. XSを含んでいるのがgccコンパイラがないためにインストールできない。
</p>
<p>
  -> gccのパッケージをLinuxの場合であれば、yumやapt-getでgccをインストール、Windowsの場合は5.10.1以降のActivePerlであればMinGWが梱包されておりgcc環境がある。
</p>
<p>
  5. プロキシ接続でしか、インターネットを利用できない環境にある
</p>
<p>
  　->企業などのネットワークの場合はプロキシサーバを介してしてインターネットに接続できない場合があるでしょう。その場合にはプロキシを設定することができます。プロキシのドメイン名とポート番号は調べる必要があります。　
</p>
<pre>
# プロキシの設定
o conf http_proxy ftp_proxy=http://proxy.you.com:8000/
o conf ftp_proxy http_proxy=http://proxy.you.com:8000/
</pre>
<p>
  また外部に対してHTTP接続しか許可されていないのに、urllistにftpのURLが含まれていると接続に失敗してしまいます。下記のURLのどれかをurllistの先頭に含めましょう。
</p>
<pre>
# HTTP接続でインストールする場合
http://ftp.nara.wide.ad.jp/pub/CPAN/
http://ftp.jaist.ac.jp/pub/CPAN/
http://ftp.riken.jp/lang/CPAN/
http://ftp.yz.yamagata-u.ac.jp/pub/lang/cpan/
</pre>
<p>
  6. モジュールが他の(Perlではない)ライブラリに依存している
</p>
<p>
  -> たとえばXML::LibXMLはlibxml2というライブラリに依存しています。そのライブラリがインストールされていない場合はCPANでのインストールに失敗します。yumやapt-getなどのコマンドでlibxml2を含むパッケージをインストールする必要があります。
</p>
<h3>CPANモジュールに関するFAQ</h3>
<p>
  Q. 依存するモジュールをインストールするときに自動的にyesと答えることはできますか。
</p>
<p>
  A. はい。できます。cpanシェルからprerequisites_policyをfollowに設定します。
</p>
<pre>
# 依存するモジュールを自動的にインストール
o conf prerequisites_policy follow
o conf commit
</pre>
<p>
  askを指定するとインストールするかどうかを確認します。ignoreを指定すると依存するモジュールをインストールしません。
</p>
<p>
  Q. CPANミラーのURL一覧が掲載されているサイトはありますか。
</p>
<p>
  A. 下記のサイトになります。
</p>
<p>
  <a href="http://www.cpan.org/SITES.html">CPAN SITES</a>
</p>
<p>
  Q. Windowsでもcpanは利用できますか。
</p>
<p>
  A. はいできます。以前はWindowsでcpanを利用するにはmakeコマンドの変わりになるnmakeというコマンドが必要でした。現在では、ActivePerlが5.10.1以降であればMinGWという開発用のツールが梱包されています。これにはmakeコマンドの変わりになるものやCのコンパイラが含まれているので、Windowsでもcpanがうまく利用できるようになりました。
</p>
<p>
  Q. モジュールのインストール履歴を見ることができますか?
</p>
<p>
  A. perllocalというドキュメントにインストール履歴が記録されます。
</p>
<pre>
# インストール履歴を見る
perldoc perllocal
</pre>
<p>
  次のようにインストール履歴が表示されます。
</p>
<pre>
       Tue Jun  8 20:15:01 2010: "Module" Mail::Address::MobileJp

       ・   "installed into: /usr/lib/perl5/site_perl/5.8.8"

       ・   "LINKTYPE: dynamic"

       ・   "VERSION: 0.09"

       ・   "EXE_FILES: "

       Tue Jun  8 20:24:46 2010: "Module" Business::CreditCard

       ・   "installed into: /usr/lib/perl5/site_perl/5.8.8"

       ・   "LINKTYPE: dynamic"

       ・   "VERSION: 0.31"

       ・   "EXE_FILES: "
</pre>
<p>
  Q. インストールされているモジュールの一覧の名前だけが欲しいです。
</p>
<p>
  A. 次のスクリプトを使ってください。ExtUtils::Installedが利用できます。
</p>
<pre>
# インストールされているモジュール名の一覧
use ExtUtils::Installed;
print join "\n", ExtUtils::Installed-&gt;new-&gt;modules;
</pre>
<p>
  Q. あたらしい環境にまとめてモジュールをインストールするにはどうすればよいでしょうか。
</p>
<p>
  A. 上記で作成したファイルをcpanに食べさせてください。xargsと組み合わせるとよいでしょう。
</p>
<pre>
# CPANモジュールをまとめてインストールする
cat installed.txt | xargs cpan
</pre>
<p>
  Q. インストールされているモジュールのディストリビューション名を知りたいです。
</p>
<p>
  A. ディストリビューション名は「ADAMK/DBD-SQLite-1.29.tar.gz」のような
</p>
<p>
  「作者名/モジュール名-バージョン.tar.gz」のような構成になります。
</p>
<p>
  これは「cpan -a」で知ることができます。
</p>
<pre>
# インストールされているモジュールとディストリビューション名の表示
cpan -a
</pre>
<p>
  でもこれはたくさんのモジュールの重複があるので、重複をなくすには次のようにします。少し時間がかかります。
</p>
<pre>
cpan -a | awk '{print $4;}' | sort -u
</pre>
<p>
  Q. root権限を持っていないのですがcpanを利用したいです。ユーザ領域にインストールすることはできますか?
</p>
<p>
  A. cpanの代わりにcpanmというツールを使うのがよいでしょう。
</p>
<p>
  Q. 確実に他の環境にCPANモジュールをデプロイする方法はありませんか。実務で確実性を求められています。
</p>
<p>
  A. cpanfileというファイルに必要なモジュールを記述してcpanmを使ってインストールするのがよいでしょう。
</p>

  </div>
  <div class="bottom">
    <style>
  .bottom {
    padding-bottom:30px;
    padding-top:30px;
  }
  .bottom ul {
    width:calc(100% - 30px);
    margin-left:auto;
    margin-right:auto;
  }
</style>

<ul>
  <li>
    <a rel="nofollow" href="https://www.youtube.com/channel/UCbeAS6ZXpSKqkzb-Nykb0ZQ">動画プログラミング講座<br>Perlゼミちゃんねる</a>
  </li>
  <li>
    <a href="https://linux.perlzemi.com/">Linuxコマンドを学ぶなら<br>Linuxサーバー管理入門</a>
  </li>
  <li>
    <a href="https://webdesign.perlzemi.com/">Webシステム開発者のための<br>Webデザイン入門</a>
  </li>
  <li>
    <a href="https://web.perlzemi.com/">Webシステム開発入門 Perl+Mojolicious</a>
  </li>
</ul>

<div style="text-align:center;font-weight:bold;margin-top:20px;margin-bottom:20px;line-height:1.8">
  Perlゼミのすべての講座は<br>Perlゼミプログラミングスクール オンラインで確認できます。
</div>
<div style="text-align:center;font-size:30px;width:calc(100% - 30px);margin-left:auto;margin-right:auto;">
  <a style="border-radius:10px;border-color:#009D82" href="https://school.perlzemi.com">
    <div>
      Perlゼミプログラミングスクール<br>オンライン
    </div>
    <div>
      <img style="margin-left:auto;margin-right:auto;"src="/images/bottom/note-pc-boy.png" width="200">
    </div>
  </a>
</div>

  </div>
</div>

        </div>
        <div class="side">
          <div class="hatena-module">
  <div class="hatena-moduletitle">
    Perlプログラミング入門
  </div>
  <div class="hatena-modulebody">
    <ul>
      <li>
        <a rel="nofollow" href="/blog/20180820153471.html">Perlのインストール</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20091226126425.html">Perl基礎文法</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20161012147627.html">配列</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20161013147635.html">ハッシュ</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20161023147731.html">条件分岐</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20170521149524.html">繰り返し処理</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20161003147558.html">文字列</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20100827127859.html">正規表現</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20100930127859.html">リファレンスと多次元データ構造</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20101130129876.html">サブルーチン</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20110212130370.html">ファイル入出力</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20161107147852.html">変数</a>
      </li>
    </ul>
  </div>
</div>
<div class="hatena-module">
  <div class="hatena-moduletitle">
    Perlの入門書
  </div>
  <div class="hatena-modulebody" style="text-align:center;letter-spacing:1px;">
    <ul>
      <li>
        <div style="font-size:17px;margin-bottom:5px"><b>初めてのPerl 第7版</b></div>
        <a rel="nofollow" href="https://www.amazon.co.jp/%E5%88%9D%E3%82%81%E3%81%A6%E3%81%AEPerl-%E7%AC%AC7%E7%89%88-Randal-L-Schwartz/dp/4873118247"><img src="https://images-na.ssl-images-amazon.com/images/I/51t%2B7ZTGW6L._SX388_BO1,204,203,200_.jpg" width="160px"></a><br>
        <div style="margin-top:10px;">Perl入門 定番の一冊</div>
      </li>
      <li>
        <div style="font-size:17px;margin-bottom:5px"><b>業務に役立つPerl</b></div>
        <a rel="nofollow" href="/blog/20120326133275.html"><img src="https://images-na.ssl-images-amazon.com/images/I/51d4T7m8NzL._SX347_BO1,204,203,200_.jpg" width="160"></a><br>
        <div style="margin-top:10px;">ログ解析など日本語を含むテキスト処理の実践!</div>
      </li>
    </ul>
  </div>
</div>
<div class="hatena-module">
  <div class="hatena-moduletitle">
    Perl辞典
  </div>
  <div class="hatena-modulebody">
    <ul>
      <li>
        <a rel="nofollow" href="/blog/20161004147558.html">標準関数</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20161022147731.html">構文・文法</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20161005147566.html">演算子</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20091116124667.html">モジュール</a>
      </li>
      <li>
        <a rel="nofollow" href="/blog/20161102147817.html">特殊変数</a>
      </li>
    </ul>
  </div>
</div>
<div class="hatena-module">
  <div class="hatena-moduletitle">
    案内
  </div>
  <div class="hatena-modulebody">
    <ul>
      <li>
        <a rel="nofollow" href="https://perlzemichannel.seesaa.net/">YouTubeでもっと簡単にプログラミングを学ぶならPerlゼミちゃんねる</a>
      </li>
      <li>
        <a href="https://linux.perlzemi.com/">Linuxコマンドを学ぶならLinuxサーバー管理入門</a>
      </li>
      <li>
        <a href="https://webdesign.perlzemi.com/">Webデザインを学ぶならWebデザイン入門</a>
      </li>
      <li>
        <a href="https://web.perlzemi.com/">Web開発を始めるななMojoliciousスタートアップ</a>
      </li>
      <li>
        <a href="https://jp.giblog.net">ブログを作るならGiblog</a>
      </li>
      <li>
        <a rel="nofollow" href="http://www.perl-entrance.org/">プログラミングの勉強会ならPerl入学式</a>
      </li>
      <li>
        <a rel="nofollow" href="/mail.html">お問合せはこちら</a>
      </li>
    </ul>
  </div>
</div>

        </div>
      </div>
      <div class="footer">
        <div class="what-is-perl">
  <div>
    <img src="/images/perl-onion-logo.png">
  </div>
  <ul>
    <li><b>Perl</b>は、<b>テキスト処理</b>の記述性とパフォーマンスに優れ、<b>正規表現</b>が言語に組み込まれているプログラミング言語です。</li>
    <li><b>Linuxサーバー管理</b>でのフィルタリングプログラム、複数行の文字列を処理、ファイル内容の検索・置換などが得意。<b>Webシステム開発</b>もMojoliciousで簡単で高速。</li>
    <li>Perlは、<b>git</b>や<b>openssl</b>など<b>Unix/Linuxミドルウェア</b>の支援ツールとして採用されています。</li>
  </ul>
</div>

<div class="kimoto_system_link">
  <a href="https://kimoto-system.co.jp">
    <img src="https://kimoto-system.co.jp/images/kimoto-system-logo.png" alt="Perl Webシステム開発">
    Perl Webシステム開発の木本システム
  </a>
</div>

<div class="copyright">
  Copyright © Yuki Kimoto
</div>

      </div>
    </div>
  </body>
</html>
